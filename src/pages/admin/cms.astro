---
import Layout from '../../layouts/Layout.astro';
import newsData from '../../data/news.json';
import slidesData from '../../data/slides.json';
import contentData from '../../data/content.json';
---

<Layout title="CMS - Qu·∫£n l√Ω News & Categories | GameGeek">
  <div class="cms-container" style="min-height: 100vh; background: #f5f5f5; padding: 2rem 0;">
    <div class="container" style="max-width: 1400px; margin: 0 auto; padding: 0 1rem;">
      <div class="cms-header" style="background: white; padding: 2rem; border-radius: 8px; margin-bottom: 2rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center;">
        <div>
          <h1 style="margin: 0; color: #333; font-size: 2rem; font-weight: bold;">CMS - Qu·∫£n l√Ω Content</h1>
          <p style="margin: 0.5rem 0 0 0; color: #666;">Qu·∫£n l√Ω categories, b√†i vi·∫øt news v√† hero slides</p>
        </div>
        <div style="display: flex; align-items: center; gap: 1rem;">
          <span id="current-username" style="color: #666; font-size: 0.9rem;"></span>
          <button id="logout-btn" style="padding: 0.5rem 1rem; border: 1px solid #dc3545; background: white; color: #dc3545; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.9rem;">
            ƒêƒÉng xu·∫•t
          </button>
        </div>
      </div>

      <div class="cms-tabs" style="display: flex; gap: 1rem; margin-bottom: 2rem; background: white; padding: 1rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); flex-wrap: wrap;">
        <button id="tab-categories" class="tab-btn active" style="padding: 0.75rem 1.5rem; border: none; background: #FF5E14; color: white; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
          Categories
        </button>
        <button id="tab-posts" class="tab-btn" style="padding: 0.75rem 1.5rem; border: none; background: #e0e0e0; color: #333; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
          B√†i vi·∫øt
        </button>
        <button id="tab-slides" class="tab-btn" style="padding: 0.75rem 1.5rem; border: none; background: #e0e0e0; color: #333; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
          Slides
        </button>
        <button id="tab-content" class="tab-btn" style="padding: 0.75rem 1.5rem; border: none; background: #e0e0e0; color: #333; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
          Text Content
        </button>
        <button id="tab-users" class="tab-btn" style="padding: 0.75rem 1.5rem; border: none; background: #e0e0e0; color: #333; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
          üë§ User Management
        </button>
      </div>

      <!-- Categories Section -->
      <div id="categories-section" class="cms-section" style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
          <h2 style="margin: 0; color: #333; font-size: 1.5rem;">Categories</h2>
          <button id="add-category-btn" style="padding: 0.75rem 1.5rem; border: none; background: #FF5E14; color: white; border-radius: 6px; cursor: pointer; font-weight: 600;">
            + Th√™m Category
          </button>
        </div>
        
        <div id="categories-list" style="display: grid; gap: 1rem;">
          <!-- Categories will be loaded here -->
        </div>
      </div>

      <!-- Posts Section -->
      <div id="posts-section" class="cms-section" style="display: none; background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
          <h2 style="margin: 0; color: #333; font-size: 1.5rem;">B√†i vi·∫øt</h2>
          <button id="add-post-btn" style="padding: 0.75rem 1.5rem; border: none; background: #FF5E14; color: white; border-radius: 6px; cursor: pointer; font-weight: 600;">
            + Th√™m B√†i vi·∫øt
          </button>
        </div>
        
        <div id="posts-list" style="display: grid; gap: 1rem;">
          <!-- Posts will be loaded here -->
        </div>
      </div>

      <!-- Slides Section -->
      <div id="slides-section" class="cms-section" style="display: none; background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
          <h2 style="margin: 0; color: #333; font-size: 1.5rem;">Hero Slides</h2>
          <button id="add-slide-btn" style="padding: 0.75rem 1.5rem; border: none; background: #FF5E14; color: white; border-radius: 6px; cursor: pointer; font-weight: 600;">
            + Th√™m Slide
          </button>
        </div>
        
        <div id="slides-list" style="display: grid; gap: 1rem;">
          <!-- Slides will be loaded here -->
        </div>
      </div>

      <!-- Text Content Section -->
      <div id="content-section" class="cms-section" style="display: none; background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <div style="margin-bottom: 1.5rem;">
          <h2 style="margin: 0 0 0.5rem 0; color: #333; font-size: 1.5rem;">Qu·∫£n l√Ω Text Content</h2>
          <p style="margin: 0; color: #666; font-size: 0.9rem;">Ch·ªânh s·ª≠a text tr√™n website theo t·ª´ng trang. D·ªÖ d√†ng v√† kh√¥ng c·∫ßn bi·∫øt code!</p>
        </div>
        
        <!-- Page Selector -->
        <div style="margin-bottom: 2rem;">
          <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600; font-size: 1.1rem;">Ch·ªçn trang c·∫ßn ch·ªânh s·ª≠a:</label>
          <select id="content-page-selector" style="width: 100%; padding: 0.75rem; border: 2px solid #FF5E14; border-radius: 6px; font-size: 1rem; font-weight: 600; background: white; cursor: pointer;">
            <option value="home">üè† Trang Ch·ªß (Home)</option>
            <option value="about">üë• Gi·ªõi Thi·ªáu (About)</option>
            <option value="services">üíº D·ªãch V·ª• (Services)</option>
            <option value="contact">üìß Li√™n H·ªá (Contact)</option>
            <option value="news">üì∞ Tin T·ª©c (News)</option>
            <option value="blog">üìù Blog</option>
            <option value="career">üíº Tuy·ªÉn D·ª•ng (Career)</option>
            <option value="program">üéØ Ch∆∞∆°ng Tr√¨nh (Program)</option>
            <option value="navbar">üß≠ Menu ƒêi·ªÅu H∆∞·ªõng (Navbar)</option>
            <option value="footer">ü¶∂ Ch√¢n Trang (Footer)</option>
            <option value="contactForm">üìã Form Li√™n H·ªá (Contact Form)</option>
          </select>
        </div>
        
        <!-- Content Forms (will be dynamically generated) -->
        <div id="content-forms-container">
          <!-- Forms will be loaded here based on selected page -->
        </div>
        
        <!-- Advanced JSON Editor (Hidden by default) -->
        <div style="margin-top: 2rem; padding-top: 2rem; border-top: 2px solid #e0e0e0;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <h3 style="margin: 0; color: #333; font-size: 1.2rem;">‚öôÔ∏è Ch·∫ø ƒë·ªô N√¢ng Cao (JSON Editor)</h3>
            <button id="toggle-json-editor" style="padding: 0.5rem 1rem; border: 1px solid #666; background: white; color: #666; border-radius: 6px; cursor: pointer; font-weight: 600;">
              Hi·ªán JSON Editor
            </button>
          </div>
          <div id="json-editor-container" style="display: none;">
            <textarea id="content-json" rows="30" style="width: 100%; padding: 1rem; border: 1px solid #ddd; border-radius: 6px; font-size: 0.9rem; font-family: 'Courier New', monospace; background: #f8f9fa;" spellcheck="false"></textarea>
            <p style="margin: 0.5rem 0 0 0; color: #666; font-size: 0.85rem;">
              üí° L∆∞u √Ω: ƒê·∫£m b·∫£o JSON h·ª£p l·ªá. S·ª≠ d·ª•ng <a href="https://jsonlint.com" target="_blank" style="color: #FF5E14;">JSONLint</a> ƒë·ªÉ ki·ªÉm tra tr∆∞·ªõc khi l∆∞u.
            </p>
            <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1rem;">
              <button id="content-validate-btn" style="padding: 0.75rem 1.5rem; border: 1px solid #28a745; background: white; color: #28a745; border-radius: 6px; cursor: pointer; font-weight: 600;">
                ‚úì Validate JSON
              </button>
              <button id="content-reset-btn" style="padding: 0.75rem 1.5rem; border: 1px solid #dc3545; background: white; color: #dc3545; border-radius: 6px; cursor: pointer; font-weight: 600;">
                ‚Ü∫ Reset
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Stat Modal -->
      <div id="stat-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center;">
        <div style="background: white; padding: 2rem; border-radius: 8px; max-width: 500px; width: 90%; max-height: 90vh; overflow-y: auto;">
          <h3 id="stat-modal-title" style="margin: 0 0 1.5rem 0; color: #333;">Th√™m Stat</h3>
          <form id="stat-form">
            <input type="hidden" id="stat-index">
            <div style="margin-bottom: 1rem;">
              <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Gi√° tr·ªã (Value)</label>
              <input type="text" id="stat-value" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="10+, 8+, 9, STRATEGIC SUPPORT, etc.">
              <p style="margin: 0.5rem 0 0 0; color: #666; font-size: 0.85rem;">üí° C√≥ th·ªÉ d√πng xu·ªëng d√≤ng b·∫±ng c√°ch nh·∫≠p \n (v√≠ d·ª•: STRATEGIC\nSUPPORT)</p>
            </div>
            <div style="margin-bottom: 1.5rem;">
              <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">M√¥ t·∫£ (Description)</label>
              <textarea id="stat-description" rows="3" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem; font-family: inherit; resize: vertical;" placeholder="Nh·∫≠p m√¥ t·∫£ cho stat n√†y..."></textarea>
            </div>
            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
              <button type="button" id="stat-cancel-btn" style="padding: 0.75rem 1.5rem; border: 1px solid #ddd; background: white; color: #333; border-radius: 6px; cursor: pointer; font-weight: 600;">
                H·ªßy
              </button>
              <button type="submit" style="padding: 0.75rem 1.5rem; border: none; background: #FF5E14; color: white; border-radius: 6px; cursor: pointer; font-weight: 600;">
                L∆∞u
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Service Slide Modal -->
      <div id="service-slide-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center;">
        <div style="background: white; padding: 2rem; border-radius: 8px; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto;">
          <h3 id="service-slide-modal-title" style="margin: 0 0 1.5rem 0; color: #333;">Th√™m Service Slide</h3>
          <form id="service-slide-form">
            <input type="hidden" id="service-slide-index">
            <div style="margin-bottom: 1rem;">
              <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">·∫¢nh n·ªÅn slide</label>
              <div style="display: flex; gap: 0.5rem; align-items: flex-start;">
                <input type="text" id="service-slide-image" required style="flex: 1; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="/images/... ho·∫∑c URL">
                <input type="file" accept="image/*" id="service-slide-image-file" style="display: none;" data-target="service-slide-image">
                <button type="button" onclick="document.getElementById('service-slide-image-file').click()" style="padding: 0.75rem 1rem; border: 1px solid #ddd; background: #f8f9fa; border-radius: 6px; cursor: pointer; white-space: nowrap;">üì∑ Ch·ªçn</button>
              </div>
              <div id="service-slide-image-preview" style="margin-top: 0.5rem; display: none;">
                <img id="service-slide-image-preview-img" src="" alt="Preview" style="max-width: 100%; max-height: 300px; border-radius: 6px; border: 1px solid #ddd;">
              </div>
              <p style="margin: 0.5rem 0 0 0; color: #666; font-size: 0.85rem;">üí° Upload ·∫£nh ho·∫∑c nh·∫≠p URL. ·∫¢nh n√†y s·∫Ω l√† n·ªÅn c·ªßa slide.</p>
            </div>
            <div style="margin-bottom: 1.5rem;">
              <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Th·ª© t·ª± (Order)</label>
              <input type="number" id="service-slide-order" required min="1" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" value="1">
            </div>
            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
              <button type="button" id="service-slide-cancel-btn" style="padding: 0.75rem 1.5rem; border: 1px solid #ddd; background: white; color: #333; border-radius: 6px; cursor: pointer; font-weight: 600;">
                H·ªßy
              </button>
              <button type="submit" style="padding: 0.75rem 1.5rem; border: none; background: #FF5E14; color: white; border-radius: 6px; cursor: pointer; font-weight: 600;">
                L∆∞u
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Service Tab Modal -->
      <div id="service-tab-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center;">
        <div style="background: white; padding: 2rem; border-radius: 8px; max-width: 800px; width: 90%; max-height: 90vh; overflow-y: auto;">
          <h3 id="service-tab-modal-title" style="margin: 0 0 1.5rem 0; color: #333;">Th√™m Tab</h3>
          <form id="service-tab-form">
            <input type="hidden" id="service-tab-index">
            <div style="margin-bottom: 1rem;">
              <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">T√™n Tab</label>
              <input type="text" id="service-tab-name" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="Business & Strategy Acceleration">
            </div>
            <div style="margin-bottom: 1rem;">
              <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">M√¥ t·∫£</label>
              <textarea id="service-tab-description" rows="3" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem; font-family: inherit; resize: vertical;" placeholder="Comprehensive advisory on publishing strategy..."></textarea>
            </div>
            <div style="margin-bottom: 1rem;">
              <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">·∫¢nh</label>
              <div style="display: flex; gap: 0.5rem; align-items: flex-start;">
                <input type="text" id="service-tab-image" required style="flex: 1; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="/renius/image/service2.jpg ho·∫∑c URL">
                <input type="file" accept="image/*" id="service-tab-image-file" style="display: none;" data-target="service-tab-image">
                <button type="button" onclick="document.getElementById('service-tab-image-file').click()" style="padding: 0.75rem 1rem; border: 1px solid #ddd; background: #f8f9fa; border-radius: 6px; cursor: pointer; white-space: nowrap;">üì∑ Ch·ªçn</button>
              </div>
              <div id="service-tab-image-preview" style="margin-top: 0.5rem; display: none;">
                <img id="service-tab-image-preview-img" src="" alt="Preview" style="max-width: 100%; max-height: 300px; border-radius: 6px; border: 1px solid #ddd;">
              </div>
            </div>
            <div style="margin-bottom: 1.5rem;">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <label style="display: block; margin: 0; color: #333; font-weight: 600;">Items (Danh s√°ch)</label>
                <button type="button" id="add-service-tab-item-btn" style="padding: 0.5rem 1rem; border: none; background: #28a745; color: white; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.85rem;">+ Th√™m Item</button>
              </div>
              <div id="service-tab-items-list" style="display: grid; gap: 1rem;">
                <!-- Items will be added here -->
              </div>
            </div>
            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
              <button type="button" id="service-tab-cancel-btn" style="padding: 0.75rem 1.5rem; border: 1px solid #ddd; background: white; color: #333; border-radius: 6px; cursor: pointer; font-weight: 600;">
                H·ªßy
              </button>
              <button type="submit" style="padding: 0.75rem 1.5rem; border: none; background: #FF5E14; color: white; border-radius: 6px; cursor: pointer; font-weight: 600;">
                L∆∞u
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- User Management Section -->
      <div id="users-section" class="cms-section" style="display: none; background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <div style="margin-bottom: 1.5rem;">
          <h2 style="margin: 0; color: #333; font-size: 1.5rem;">üë§ Qu·∫£n l√Ω User & Password</h2>
          <p style="margin: 0.5rem 0 0 0; color: #666; font-size: 0.9rem;">Thay ƒë·ªïi username v√† password cho t√†i kho·∫£n CMS</p>
        </div>

        <!-- Update Username Form -->
        <div style="margin-bottom: 2rem; padding: 1.5rem; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #FF5E14;">
          <h3 style="margin: 0 0 1rem 0; color: #333; font-size: 1.2rem; font-weight: 600;">ƒê·ªïi Username</h3>
          <form id="update-username-form">
            <div style="margin-bottom: 1rem;">
              <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Username m·ªõi</label>
              <input type="text" id="new-username" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="Nh·∫≠p username m·ªõi">
            </div>
            <div style="margin-bottom: 1rem;">
              <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Password hi·ªán t·∫°i (ƒë·ªÉ x√°c nh·∫≠n)</label>
              <input type="password" id="username-confirm-password" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="Nh·∫≠p password hi·ªán t·∫°i">
            </div>
            <div id="username-error" style="display: none; padding: 0.75rem; background: #fee; border: 1px solid #fcc; border-radius: 6px; color: #c33; font-size: 0.9rem; margin-bottom: 1rem;"></div>
            <div id="username-success" style="display: none; padding: 0.75rem; background: #efe; border: 1px solid #cfc; border-radius: 6px; color: #3c3; font-size: 0.9rem; margin-bottom: 1rem;"></div>
            <button type="submit" style="padding: 0.75rem 1.5rem; border: none; background: #FF5E14; color: white; border-radius: 6px; cursor: pointer; font-weight: 600;">
              C·∫≠p nh·∫≠t Username
            </button>
          </form>
        </div>

        <!-- Update Password Form -->
        <div style="padding: 1.5rem; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #28a745;">
          <h3 style="margin: 0 0 1rem 0; color: #333; font-size: 1.2rem; font-weight: 600;">ƒê·ªïi Password</h3>
          <form id="update-password-form">
            <div style="margin-bottom: 1rem;">
              <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Password hi·ªán t·∫°i</label>
              <input type="password" id="old-password" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="Nh·∫≠p password hi·ªán t·∫°i">
            </div>
            <div style="margin-bottom: 1rem;">
              <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Password m·ªõi</label>
              <input type="password" id="new-password" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="Nh·∫≠p password m·ªõi" minlength="6">
            </div>
            <div style="margin-bottom: 1rem;">
              <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">X√°c nh·∫≠n password m·ªõi</label>
              <input type="password" id="confirm-password" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="Nh·∫≠p l·∫°i password m·ªõi" minlength="6">
            </div>
            <div id="password-error" style="display: none; padding: 0.75rem; background: #fee; border: 1px solid #fcc; border-radius: 6px; color: #c33; font-size: 0.9rem; margin-bottom: 1rem;"></div>
            <div id="password-success" style="display: none; padding: 0.75rem; background: #efe; border: 1px solid #cfc; border-radius: 6px; color: #3c3; font-size: 0.9rem; margin-bottom: 1rem;"></div>
            <button type="submit" style="padding: 0.75rem 1.5rem; border: none; background: #28a745; color: white; border-radius: 6px; cursor: pointer; font-weight: 600;">
              C·∫≠p nh·∫≠t Password
            </button>
          </form>
        </div>
      </div>

      <!-- Save Button -->
      <div style="position: fixed; bottom: 2rem; right: 2rem; z-index: 1000;">
        <button id="save-btn" style="padding: 1rem 2rem; border: none; background: #28a745; color: white; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 1rem; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
          üíæ L∆∞u thay ƒë·ªïi
        </button>
      </div>
    </div>
  </div>

  <!-- Category Modal -->
  <div id="category-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center;">
    <div style="background: white; padding: 2rem; border-radius: 8px; max-width: 500px; width: 90%; max-height: 90vh; overflow-y: auto;">
      <h3 id="category-modal-title" style="margin: 0 0 1.5rem 0; color: #333;">Th√™m Category</h3>
      <form id="category-form">
        <input type="hidden" id="category-id">
        <div style="margin-bottom: 1rem;">
          <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">T√™n Category</label>
          <input type="text" id="category-name" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;">
        </div>
        <div style="margin-bottom: 1.5rem;">
          <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Slug</label>
          <input type="text" id="category-slug" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;">
        </div>
        <div style="display: flex; gap: 1rem; justify-content: flex-end;">
          <button type="button" id="category-cancel-btn" style="padding: 0.75rem 1.5rem; border: 1px solid #ddd; background: white; color: #333; border-radius: 6px; cursor: pointer; font-weight: 600;">
            H·ªßy
          </button>
          <button type="submit" style="padding: 0.75rem 1.5rem; border: none; background: #FF5E14; color: white; border-radius: 6px; cursor: pointer; font-weight: 600;">
            L∆∞u
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Post Modal -->
  <div id="post-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center;">
    <div style="background: white; padding: 2rem; border-radius: 8px; max-width: 800px; width: 90%; max-height: 90vh; overflow-y: auto;">
      <h3 id="post-modal-title" style="margin: 0 0 1.5rem 0; color: #333;">Th√™m B√†i vi·∫øt</h3>
      <form id="post-form">
        <input type="hidden" id="post-id">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
          <div>
            <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Ti√™u ƒë·ªÅ</label>
            <input type="text" id="post-title" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;">
          </div>
          <div>
            <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Slug</label>
            <input type="text" id="post-slug" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;">
          </div>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
          <div>
            <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Ng√†y ƒëƒÉng</label>
            <input type="text" id="post-date" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="August 28, 2025">
          </div>
          <div>
            <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Category</label>
            <select id="post-category" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;">
              <!-- Options will be loaded here -->
            </select>
          </div>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
          <div>
            <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">T√°c gi·∫£</label>
            <input type="text" id="post-author" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;">
          </div>
          <div>
            <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">H√¨nh ·∫£nh ch√≠nh</label>
            <div style="display: flex; gap: 0.5rem; align-items: flex-start;">
              <input type="text" id="post-image" required style="flex: 1; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="/images/... ho·∫∑c URL">
              <input type="file" accept="image/*" id="post-image-file" style="display: none;" data-target="post-image">
              <button type="button" onclick="document.getElementById('post-image-file').click()" style="padding: 0.75rem 1rem; border: 1px solid #ddd; background: #f8f9fa; border-radius: 6px; cursor: pointer; white-space: nowrap;">üì∑ Ch·ªçn</button>
            </div>
            <div id="post-image-preview" style="margin-top: 0.5rem; display: none;">
              <img id="post-image-preview-img" src="" alt="Preview" style="max-width: 200px; max-height: 150px; border-radius: 6px; border: 1px solid #ddd;">
            </div>
          </div>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
          <div>
            <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Thumb</label>
            <div style="display: flex; gap: 0.5rem; align-items: flex-start;">
              <input type="text" id="post-thumb" required style="flex: 1; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="/images/... ho·∫∑c URL">
              <input type="file" accept="image/*" id="post-thumb-file" style="display: none;" data-target="post-thumb">
              <button type="button" onclick="document.getElementById('post-thumb-file').click()" style="padding: 0.75rem 1rem; border: 1px solid #ddd; background: #f8f9fa; border-radius: 6px; cursor: pointer; white-space: nowrap;">üì∑</button>
            </div>
            <div id="post-thumb-preview" style="margin-top: 0.5rem; display: none;">
              <img id="post-thumb-preview-img" src="" alt="Preview" style="max-width: 150px; max-height: 100px; border-radius: 6px; border: 1px solid #ddd;">
            </div>
          </div>
          <div>
            <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Thumb 2</label>
            <div style="display: flex; gap: 0.5rem; align-items: flex-start;">
              <input type="text" id="post-thumb2" style="flex: 1; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="/images/... ho·∫∑c URL">
              <input type="file" accept="image/*" id="post-thumb2-file" style="display: none;" data-target="post-thumb2">
              <button type="button" onclick="document.getElementById('post-thumb2-file').click()" style="padding: 0.75rem 1rem; border: 1px solid #ddd; background: #f8f9fa; border-radius: 6px; cursor: pointer; white-space: nowrap;">üì∑</button>
            </div>
            <div id="post-thumb2-preview" style="margin-top: 0.5rem; display: none;">
              <img id="post-thumb2-preview-img" src="" alt="Preview" style="max-width: 150px; max-height: 100px; border-radius: 6px; border: 1px solid #ddd;">
            </div>
          </div>
          <div>
            <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Thumb 3</label>
            <div style="display: flex; gap: 0.5rem; align-items: flex-start;">
              <input type="text" id="post-thumb3" style="flex: 1; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="/images/... ho·∫∑c URL">
              <input type="file" accept="image/*" id="post-thumb3-file" style="display: none;" data-target="post-thumb3">
              <button type="button" onclick="document.getElementById('post-thumb3-file').click()" style="padding: 0.75rem 1rem; border: 1px solid #ddd; background: #f8f9fa; border-radius: 6px; cursor: pointer; white-space: nowrap;">üì∑</button>
            </div>
            <div id="post-thumb3-preview" style="margin-top: 0.5rem; display: none;">
              <img id="post-thumb3-preview-img" src="" alt="Preview" style="max-width: 150px; max-height: 100px; border-radius: 6px; border: 1px solid #ddd;">
            </div>
          </div>
        </div>
        <div style="margin-bottom: 1rem;">
          <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Breadcrumb Background</label>
          <div style="display: flex; gap: 0.5rem; align-items: flex-start;">
            <input type="text" id="post-breadcrumbBg" style="flex: 1; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="/images/... ho·∫∑c URL">
            <input type="file" accept="image/*" id="post-breadcrumbBg-file" style="display: none;" data-target="post-breadcrumbBg">
            <button type="button" onclick="document.getElementById('post-breadcrumbBg-file').click()" style="padding: 0.75rem 1rem; border: 1px solid #ddd; background: #f8f9fa; border-radius: 6px; cursor: pointer; white-space: nowrap;">üì∑</button>
          </div>
          <div id="post-breadcrumbBg-preview" style="margin-top: 0.5rem; display: none;">
            <img id="post-breadcrumbBg-preview-img" src="" alt="Preview" style="max-width: 200px; max-height: 150px; border-radius: 6px; border: 1px solid #ddd;">
          </div>
        </div>
        <div style="margin-bottom: 1rem; padding: 1rem; background: #e7f3ff; border-radius: 6px; border-left: 4px solid #2196F3;">
          <p style="margin: 0; color: #1976D2; font-size: 0.9rem;">
            <strong>üí° H∆∞·ªõng d·∫´n upload ·∫£nh:</strong><br>
            ‚Ä¢ <strong>C√°ch 1:</strong> Ch·ªçn ·∫£nh t·ª´ m√°y t√≠nh (file &lt; 500KB) ‚Üí T·ª± ƒë·ªông convert sang base64<br>
            ‚Ä¢ <strong>C√°ch 2:</strong> Upload l√™n <a href="https://imgbb.com" target="_blank" style="color: #1976D2; text-decoration: underline;">ImgBB.com</a> (mi·ªÖn ph√≠) ‚Üí Copy URL v√† paste v√†o ƒë√¢y<br>
            ‚Ä¢ <strong>C√°ch 3:</strong> Copy file v√†o th∆∞ m·ª•c <code>public/images/</code> ‚Üí Nh·∫≠p ƒë∆∞·ªùng d·∫´n <code>/images/t√™n-file.jpg</code>
          </p>
        </div>
        <div style="margin-bottom: 1.5rem;">
          <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">N·ªôi dung (HTML)</label>
          <textarea id="post-content" rows="10" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem; font-family: monospace;"></textarea>
        </div>
        <div style="display: flex; gap: 1rem; justify-content: flex-end;">
          <button type="button" id="post-cancel-btn" style="padding: 0.75rem 1.5rem; border: 1px solid #ddd; background: white; color: #333; border-radius: 6px; cursor: pointer; font-weight: 600;">
            H·ªßy
          </button>
          <button type="submit" style="padding: 0.75rem 1.5rem; border: none; background: #FF5E14; color: white; border-radius: 6px; cursor: pointer; font-weight: 600;">
            L∆∞u
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Slide Modal -->
  <div id="slide-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center;">
    <div style="background: white; padding: 2rem; border-radius: 8px; max-width: 700px; width: 90%; max-height: 90vh; overflow-y: auto;">
      <h3 id="slide-modal-title" style="margin: 0 0 1.5rem 0; color: #333;">Th√™m Slide</h3>
      <form id="slide-form">
        <input type="hidden" id="slide-id">
        <div style="margin-bottom: 1rem;">
          <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Lo·∫°i Slide</label>
          <select id="slide-type" required style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;">
            <option value="content">Content (C√≥ text v√† button)</option>
            <option value="image">Image (Ch·ªâ ·∫£nh)</option>
          </select>
        </div>
        <div id="slide-content-fields">
          <div style="margin-bottom: 1rem;">
            <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Ti√™u ƒë·ªÅ</label>
            <input type="text" id="slide-title" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="THE GAMING CENTRAL HUB OF VIETNAM">
          </div>
          <div style="margin-bottom: 1rem;">
            <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Subtitle</label>
            <input type="text" id="slide-subtitle" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="WHERE GAMING MEETS GLOBAL OPPORTUNITY">
          </div>
          <div style="margin-bottom: 1rem;">
            <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">M√¥ t·∫£</label>
            <textarea id="slide-description" rows="3" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;"></textarea>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
            <div>
              <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Button Text</label>
              <input type="text" id="slide-buttonText" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="Let's Talk">
            </div>
            <div>
              <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Button Link</label>
              <input type="text" id="slide-buttonLink" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="/contact">
            </div>
          </div>
        </div>
        <div id="slide-image-fields" style="display: none;">
          <div style="margin-bottom: 1rem;">
            <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">H√¨nh ·∫£nh</label>
            <div style="display: flex; gap: 0.5rem; align-items: flex-start;">
              <input type="text" id="slide-image" required style="flex: 1; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" placeholder="/images/... ho·∫∑c URL">
              <input type="file" accept="image/*" id="slide-image-file" style="display: none;" data-target="slide-image">
              <button type="button" onclick="document.getElementById('slide-image-file').click()" style="padding: 0.75rem 1rem; border: 1px solid #ddd; background: #f8f9fa; border-radius: 6px; cursor: pointer; white-space: nowrap;">üì∑ Ch·ªçn</button>
            </div>
            <div id="slide-image-preview" style="margin-top: 0.5rem; display: none;">
              <img id="slide-image-preview-img" src="" alt="Preview" style="max-width: 300px; max-height: 200px; border-radius: 6px; border: 1px solid #ddd;">
            </div>
          </div>
        </div>
        <div style="margin-bottom: 1.5rem;">
          <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Th·ª© t·ª± (Order)</label>
          <input type="number" id="slide-order" required min="1" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;" value="1">
        </div>
        <div style="display: flex; gap: 1rem; justify-content: flex-end;">
          <button type="button" id="slide-cancel-btn" style="padding: 0.75rem 1.5rem; border: 1px solid #ddd; background: white; color: #333; border-radius: 6px; cursor: pointer; font-weight: 600;">
            H·ªßy
          </button>
          <button type="submit" style="padding: 0.75rem 1.5rem; border: none; background: #FF5E14; color: white; border-radius: 6px; cursor: pointer; font-weight: 600;">
            L∆∞u
          </button>
        </div>
      </form>
    </div>
  </div>

  <script define:vars={{ newsData, slidesData, contentData }}>
    // Authentication check
    function checkAuth() {
      const authenticated = localStorage.getItem('cms_authenticated') === 'true';
      if (!authenticated) {
        window.location.href = '/admin/login';
        return false;
      }
      
      // Check session timeout (24 hours)
      const loginTime = localStorage.getItem('cms_login_time');
      if (loginTime) {
        const timeDiff = Date.now() - parseInt(loginTime, 10);
        const SESSION_TIMEOUT = 24 * 60 * 60 * 1000; // 24 hours
        if (timeDiff > SESSION_TIMEOUT) {
          localStorage.removeItem('cms_authenticated');
          localStorage.removeItem('cms_username');
          localStorage.removeItem('cms_login_time');
          window.location.href = '/admin/login';
          return false;
        }
      }
      
      // Display current username
      const username = localStorage.getItem('cms_username') || 'admin';
      const usernameEl = document.getElementById('current-username');
      if (usernameEl) {
        usernameEl.textContent = `Xin ch√†o, ${username}`;
      }
      
      return true;
    }

    // Check authentication on page load
    if (!checkAuth()) {
      // Will redirect, so stop execution
      throw new Error('Not authenticated');
    }

    // Logout handler
    document.getElementById('logout-btn').addEventListener('click', () => {
      if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën ƒëƒÉng xu·∫•t?')) {
        localStorage.removeItem('cms_authenticated');
        localStorage.removeItem('cms_username');
        localStorage.removeItem('cms_login_time');
        window.location.href = '/admin/login';
      }
    });

    // Initialize data
    let categories = [...newsData.categories];
    let posts = [...newsData.posts];
    let slides = [...slidesData.slides];
    let content = JSON.parse(JSON.stringify(contentData)); // Deep copy
    let currentEditingCategory = null;
    let currentEditingPost = null;
    let currentEditingSlide = null;
    
    // Initialize stats, vision, mission from content
    let stats = content.about?.features || [];
    let vision = content.about?.vision || { title: 'Vision', description: '' };
    let mission = content.about?.mission || { title: 'Mission', description: '' };
    let currentEditingStatIndex = null;
    
    // Initialize service slides
    let serviceSlides = content.services?.serviceSlides || [];
    let currentEditingServiceSlideIndex = null;
    
    // Initialize service tabs
    let serviceTabs = content.services?.tabs || [];
    let currentEditingServiceTabIndex = null;
    let currentEditingServiceTabItems = [];
    
    // Function to reload stats from content when about page is selected
    function reloadStatsFromContent() {
      stats = content.about?.features || [];
      vision = content.about?.vision || { title: 'Vision', description: '' };
      mission = content.about?.mission || { title: 'Mission', description: '' };
    }
    
    // Function to reload service slides from content when services page is selected
    function reloadServiceSlidesFromContent() {
      serviceSlides = content.services?.serviceSlides || [];
      serviceTabs = content.services?.tabs || [];
    }

    // Tab switching
    document.getElementById('tab-categories').addEventListener('click', () => {
      document.getElementById('categories-section').style.display = 'block';
      document.getElementById('posts-section').style.display = 'none';
      document.getElementById('slides-section').style.display = 'none';
      document.getElementById('content-section').style.display = 'none';
      document.getElementById('users-section').style.display = 'none';
      document.getElementById('tab-categories').style.background = '#FF5E14';
      document.getElementById('tab-categories').style.color = 'white';
      document.getElementById('tab-posts').style.background = '#e0e0e0';
      document.getElementById('tab-posts').style.color = '#333';
      document.getElementById('tab-slides').style.background = '#e0e0e0';
      document.getElementById('tab-slides').style.color = '#333';
      document.getElementById('tab-content').style.background = '#e0e0e0';
      document.getElementById('tab-content').style.color = '#333';
      document.getElementById('tab-users').style.background = '#e0e0e0';
      document.getElementById('tab-users').style.color = '#333';
    });

    document.getElementById('tab-posts').addEventListener('click', () => {
      document.getElementById('categories-section').style.display = 'none';
      document.getElementById('posts-section').style.display = 'block';
      document.getElementById('slides-section').style.display = 'none';
      document.getElementById('content-section').style.display = 'none';
      document.getElementById('users-section').style.display = 'none';
      document.getElementById('tab-posts').style.background = '#FF5E14';
      document.getElementById('tab-posts').style.color = 'white';
      document.getElementById('tab-categories').style.background = '#e0e0e0';
      document.getElementById('tab-categories').style.color = '#333';
      document.getElementById('tab-slides').style.background = '#e0e0e0';
      document.getElementById('tab-slides').style.color = '#333';
      document.getElementById('tab-content').style.background = '#e0e0e0';
      document.getElementById('tab-content').style.color = '#333';
      document.getElementById('tab-users').style.background = '#e0e0e0';
      document.getElementById('tab-users').style.color = '#333';
    });

    document.getElementById('tab-slides').addEventListener('click', () => {
      document.getElementById('categories-section').style.display = 'none';
      document.getElementById('posts-section').style.display = 'none';
      document.getElementById('slides-section').style.display = 'block';
      document.getElementById('content-section').style.display = 'none';
      document.getElementById('users-section').style.display = 'none';
      document.getElementById('tab-slides').style.background = '#FF5E14';
      document.getElementById('tab-slides').style.color = 'white';
      document.getElementById('tab-categories').style.background = '#e0e0e0';
      document.getElementById('tab-categories').style.color = '#333';
      document.getElementById('tab-posts').style.background = '#e0e0e0';
      document.getElementById('tab-posts').style.color = '#333';
      document.getElementById('tab-content').style.background = '#e0e0e0';
      document.getElementById('tab-content').style.color = '#333';
      document.getElementById('tab-users').style.background = '#e0e0e0';
      document.getElementById('tab-users').style.color = '#333';
    });

    document.getElementById('tab-content').addEventListener('click', () => {
      document.getElementById('categories-section').style.display = 'none';
      document.getElementById('posts-section').style.display = 'none';
      document.getElementById('slides-section').style.display = 'none';
      document.getElementById('content-section').style.display = 'block';
      document.getElementById('users-section').style.display = 'none';
      document.getElementById('tab-content').style.background = '#FF5E14';
      document.getElementById('tab-content').style.color = 'white';
      document.getElementById('tab-categories').style.background = '#e0e0e0';
      document.getElementById('tab-categories').style.color = '#333';
      document.getElementById('tab-posts').style.background = '#e0e0e0';
      document.getElementById('tab-posts').style.color = '#333';
      document.getElementById('tab-slides').style.background = '#e0e0e0';
      document.getElementById('tab-slides').style.color = '#333';
      document.getElementById('tab-users').style.background = '#e0e0e0';
      document.getElementById('tab-users').style.color = '#333';
      // Load content JSON
      document.getElementById('content-json').value = JSON.stringify(content, null, 2);
      // Load first page form
      loadContentForm('home');
    });

    document.getElementById('tab-users').addEventListener('click', () => {
      document.getElementById('categories-section').style.display = 'none';
      document.getElementById('posts-section').style.display = 'none';
      document.getElementById('slides-section').style.display = 'none';
      document.getElementById('content-section').style.display = 'none';
      document.getElementById('users-section').style.display = 'block';
      document.getElementById('tab-users').style.background = '#FF5E14';
      document.getElementById('tab-users').style.color = 'white';
      document.getElementById('tab-categories').style.background = '#e0e0e0';
      document.getElementById('tab-categories').style.color = '#333';
      document.getElementById('tab-posts').style.background = '#e0e0e0';
      document.getElementById('tab-posts').style.color = '#333';
      document.getElementById('tab-slides').style.background = '#e0e0e0';
      document.getElementById('tab-slides').style.color = '#333';
      document.getElementById('tab-content').style.background = '#e0e0e0';
      document.getElementById('tab-content').style.color = '#333';
    });

    // Render categories
    function renderCategories() {
      const container = document.getElementById('categories-list');
      container.innerHTML = categories.map(cat => `
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: #f9f9f9; border-radius: 6px; border: 1px solid #e0e0e0;">
          <div>
            <h4 style="margin: 0 0 0.25rem 0; color: #333; font-size: 1.1rem;">${cat.name}</h4>
            <p style="margin: 0; color: #666; font-size: 0.9rem;">Slug: ${cat.slug}</p>
          </div>
          <div style="display: flex; gap: 0.5rem;">
            <button onclick="editCategory('${cat.id}')" style="padding: 0.5rem 1rem; border: 1px solid #FF5E14; background: white; color: #FF5E14; border-radius: 6px; cursor: pointer; font-weight: 600;">
              S·ª≠a
            </button>
            <button onclick="deleteCategory('${cat.id}')" style="padding: 0.5rem 1rem; border: none; background: #dc3545; color: white; border-radius: 6px; cursor: pointer; font-weight: 600;">
              X√≥a
            </button>
          </div>
        </div>
      `).join('');
    }

    // Render posts
    function renderPosts() {
      const container = document.getElementById('posts-list');
      container.innerHTML = posts.map(post => {
        const category = categories.find(c => c.id === post.category);
        return `
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: #f9f9f9; border-radius: 6px; border: 1px solid #e0e0e0;">
            <div style="flex: 1;">
              <h4 style="margin: 0 0 0.25rem 0; color: #333; font-size: 1.1rem;">${post.title}</h4>
              <p style="margin: 0; color: #666; font-size: 0.9rem;">
                ${post.date} | ${category ? category.name : post.category} | ${post.author}
              </p>
            </div>
            <div style="display: flex; gap: 0.5rem;">
              <button onclick="editPost('${post.id}')" style="padding: 0.5rem 1rem; border: 1px solid #FF5E14; background: white; color: #FF5E14; border-radius: 6px; cursor: pointer; font-weight: 600;">
                S·ª≠a
              </button>
              <button onclick="deletePost('${post.id}')" style="padding: 0.5rem 1rem; border: none; background: #dc3545; color: white; border-radius: 6px; cursor: pointer; font-weight: 600;">
                X√≥a
              </button>
            </div>
          </div>
        `;
      }).join('');
    }

    // Category functions
    window.editCategory = function(id) {
      const category = categories.find(c => c.id === id);
      currentEditingCategory = category;
      document.getElementById('category-id').value = category.id;
      document.getElementById('category-name').value = category.name;
      document.getElementById('category-slug').value = category.slug;
      document.getElementById('category-modal-title').textContent = 'S·ª≠a Category';
      document.getElementById('category-modal').style.display = 'flex';
    };

    window.deleteCategory = function(id) {
      if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a category n√†y?')) {
        categories = categories.filter(c => c.id !== id);
        // Also remove category from posts
        posts = posts.map(p => {
          if (p.category === id) {
            return { ...p, category: '' };
          }
          return p;
        });
        renderCategories();
        renderPosts();
      }
    };

    document.getElementById('add-category-btn').addEventListener('click', () => {
      currentEditingCategory = null;
      document.getElementById('category-form').reset();
      document.getElementById('category-id').value = '';
      document.getElementById('category-modal-title').textContent = 'Th√™m Category';
      document.getElementById('category-modal').style.display = 'flex';
    });

    document.getElementById('category-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const id = document.getElementById('category-id').value || 'cat-' + Date.now();
      const name = document.getElementById('category-name').value;
      const slug = document.getElementById('category-slug').value;

      if (currentEditingCategory) {
        const index = categories.findIndex(c => c.id === currentEditingCategory.id);
        categories[index] = { id, name, slug };
      } else {
        categories.push({ id, name, slug });
      }

      document.getElementById('category-modal').style.display = 'none';
      renderCategories();
    });

    document.getElementById('category-cancel-btn').addEventListener('click', () => {
      document.getElementById('category-modal').style.display = 'none';
    });

    // Post functions
    function loadCategoryOptions() {
      const select = document.getElementById('post-category');
      select.innerHTML = categories.map(cat => 
        `<option value="${cat.id}">${cat.name}</option>`
      ).join('');
    }

    window.editPost = function(id) {
      const post = posts.find(p => p.id === id);
      currentEditingPost = post;
      document.getElementById('post-id').value = post.id;
      document.getElementById('post-title').value = post.title;
      document.getElementById('post-slug').value = post.slug;
      document.getElementById('post-date').value = post.date;
      document.getElementById('post-category').value = post.category;
      document.getElementById('post-author').value = post.author;
      document.getElementById('post-image').value = post.image;
      document.getElementById('post-thumb').value = post.thumb;
      document.getElementById('post-thumb2').value = post.thumb2 || '';
      document.getElementById('post-thumb3').value = post.thumb3 || '';
      document.getElementById('post-breadcrumbBg').value = post.breadcrumbBg || '';
      document.getElementById('post-content').value = post.content || '';
      document.getElementById('post-modal-title').textContent = 'S·ª≠a B√†i vi·∫øt';
      document.getElementById('post-modal').style.display = 'flex';
    };

    window.deletePost = function(id) {
      if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a b√†i vi·∫øt n√†y?')) {
        posts = posts.filter(p => p.id !== id);
        renderPosts();
      }
    };

    document.getElementById('add-post-btn').addEventListener('click', () => {
      currentEditingPost = null;
      document.getElementById('post-form').reset();
      document.getElementById('post-id').value = '';
      document.getElementById('post-modal-title').textContent = 'Th√™m B√†i vi·∫øt';
      loadCategoryOptions();
      document.getElementById('post-modal').style.display = 'flex';
    });

    document.getElementById('post-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const id = document.getElementById('post-id').value || 'post-' + Date.now();
      const post = {
        id,
        slug: document.getElementById('post-slug').value,
        title: document.getElementById('post-title').value,
        date: document.getElementById('post-date').value,
        category: document.getElementById('post-category').value,
        author: document.getElementById('post-author').value,
        image: document.getElementById('post-image').value,
        thumb: document.getElementById('post-thumb').value,
        thumb2: document.getElementById('post-thumb2').value || '',
        thumb3: document.getElementById('post-thumb3').value || '',
        breadcrumbBg: document.getElementById('post-breadcrumbBg').value || '',
        content: document.getElementById('post-content').value || ''
      };

      if (currentEditingPost) {
        const index = posts.findIndex(p => p.id === currentEditingPost.id);
        posts[index] = post;
      } else {
        posts.push(post);
      }

      document.getElementById('post-modal').style.display = 'none';
      renderPosts();
    });

    document.getElementById('post-cancel-btn').addEventListener('click', () => {
      document.getElementById('post-modal').style.display = 'none';
      // Reset previews
      ['image', 'thumb', 'thumb2', 'thumb3', 'breadcrumbBg'].forEach(field => {
        const preview = document.getElementById(`post-${field}-preview`);
        if (preview) preview.style.display = 'none';
      });
    });

    // Image upload and preview handlers
    function setupImageUpload(fileInputId, textInputId, previewId, previewImgId) {
      const fileInput = document.getElementById(fileInputId);
      const textInput = document.getElementById(textInputId);
      const preview = document.getElementById(previewId);
      const previewImg = document.getElementById(previewImgId);

      // Handle file selection
      fileInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
          // Check file size (max 5MB)
          if (file.size > 5 * 1024 * 1024) {
            alert('File qu√° l·ªõn! Vui l√≤ng ch·ªçn file nh·ªè h∆°n 5MB.');
            return;
          }

          const reader = new FileReader();
          reader.onload = (event) => {
            const base64 = event.target.result;
            // Show preview
            previewImg.src = base64;
            preview.style.display = 'block';
            
            // Option 1: Use base64 (for small images)
            if (file.size < 500 * 1024) { // Less than 500KB
              textInput.value = base64;
            } else {
              // Option 2: Upload to ImgBB or use local path
              textInput.value = ''; // Clear and let user choose
              alert('File l·ªõn h∆°n 500KB. Vui l√≤ng:\n1. Upload l√™n ImgBB/Cloudinary v√† nh·∫≠p URL\n2. Ho·∫∑c copy file v√†o public/images/ v√† nh·∫≠p ƒë∆∞·ªùng d·∫´n /images/t√™n-file.jpg');
            }
          };
          reader.readAsDataURL(file);
        }
      });

      // Handle URL input change - show preview if it's a valid image URL
      textInput.addEventListener('input', (e) => {
        const url = e.target.value;
        if (url && (url.startsWith('http') || url.startsWith('data:image') || url.startsWith('/images'))) {
          previewImg.src = url;
          preview.style.display = 'block';
        } else if (!url) {
          preview.style.display = 'none';
        }
      });

      // Show preview on edit if image exists
      if (textInput.value && (textInput.value.startsWith('http') || textInput.value.startsWith('data:image') || textInput.value.startsWith('/images'))) {
        previewImg.src = textInput.value;
        preview.style.display = 'block';
      }
    }

    // Setup image uploads for all image fields
    setupImageUpload('post-image-file', 'post-image', 'post-image-preview', 'post-image-preview-img');
    setupImageUpload('post-thumb-file', 'post-thumb', 'post-thumb-preview', 'post-thumb-preview-img');
    setupImageUpload('post-thumb2-file', 'post-thumb2', 'post-thumb2-preview', 'post-thumb2-preview-img');
    setupImageUpload('post-thumb3-file', 'post-thumb3', 'post-thumb3-preview', 'post-thumb3-preview-img');
    setupImageUpload('post-breadcrumbBg-file', 'post-breadcrumbBg', 'post-breadcrumbBg-preview', 'post-breadcrumbBg-preview-img');

    // Update editPost to show previews
    const originalEditPost = window.editPost;
    window.editPost = function(id) {
      originalEditPost(id);
      // Show previews for existing images
      setTimeout(() => {
        ['image', 'thumb', 'thumb2', 'thumb3', 'breadcrumbBg'].forEach(field => {
          const input = document.getElementById(`post-${field}`);
          const preview = document.getElementById(`post-${field}-preview`);
          const previewImg = document.getElementById(`post-${field}-preview-img`);
          if (input && input.value && preview && previewImg) {
            previewImg.src = input.value;
            preview.style.display = 'block';
          }
        });
      }, 100);
    };

    // Slide functions
    function renderSlides() {
      const container = document.getElementById('slides-list');
      const sortedSlides = [...slides].sort((a, b) => a.order - b.order);
      container.innerHTML = sortedSlides.map(slide => {
        if (slide.type === 'content') {
          return `
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: #f9f9f9; border-radius: 6px; border: 1px solid #e0e0e0;">
              <div style="flex: 1;">
                <h4 style="margin: 0 0 0.25rem 0; color: #333; font-size: 1.1rem;">${slide.title || 'Content Slide'}</h4>
                <p style="margin: 0; color: #666; font-size: 0.9rem;">Type: Content | Order: ${slide.order}</p>
              </div>
              <div style="display: flex; gap: 0.5rem;">
                <button onclick="editSlide('${slide.id}')" style="padding: 0.5rem 1rem; border: 1px solid #FF5E14; background: white; color: #FF5E14; border-radius: 6px; cursor: pointer; font-weight: 600;">
                  S·ª≠a
                </button>
                <button onclick="deleteSlide('${slide.id}')" style="padding: 0.5rem 1rem; border: none; background: #dc3545; color: white; border-radius: 6px; cursor: pointer; font-weight: 600;">
                  X√≥a
                </button>
              </div>
            </div>
          `;
        } else {
          return `
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: #f9f9f9; border-radius: 6px; border: 1px solid #e0e0e0;">
              <div style="flex: 1; display: flex; gap: 1rem; align-items: center;">
                <img src="${slide.image}" alt="Slide" style="width: 100px; height: 60px; object-fit: cover; border-radius: 6px;">
                <div>
                  <h4 style="margin: 0 0 0.25rem 0; color: #333; font-size: 1.1rem;">Image Slide</h4>
                  <p style="margin: 0; color: #666; font-size: 0.9rem;">Order: ${slide.order}</p>
                </div>
              </div>
              <div style="display: flex; gap: 0.5rem;">
                <button onclick="editSlide('${slide.id}')" style="padding: 0.5rem 1rem; border: 1px solid #FF5E14; background: white; color: #FF5E14; border-radius: 6px; cursor: pointer; font-weight: 600;">
                  S·ª≠a
                </button>
                <button onclick="deleteSlide('${slide.id}')" style="padding: 0.5rem 1rem; border: none; background: #dc3545; color: white; border-radius: 6px; cursor: pointer; font-weight: 600;">
                  X√≥a
                </button>
              </div>
            </div>
          `;
        }
      }).join('');
    }

    window.editSlide = function(id) {
      const slide = slides.find(s => s.id === id);
      currentEditingSlide = slide;
      document.getElementById('slide-id').value = slide.id;
      document.getElementById('slide-type').value = slide.type;
      document.getElementById('slide-order').value = slide.order;
      
      if (slide.type === 'content') {
        document.getElementById('slide-title').value = slide.title || '';
        document.getElementById('slide-subtitle').value = slide.subtitle || '';
        document.getElementById('slide-description').value = slide.description || '';
        document.getElementById('slide-buttonText').value = slide.buttonText || '';
        document.getElementById('slide-buttonLink').value = slide.buttonLink || '';
        document.getElementById('slide-content-fields').style.display = 'block';
        document.getElementById('slide-image-fields').style.display = 'none';
      } else {
        document.getElementById('slide-image').value = slide.image || '';
        document.getElementById('slide-content-fields').style.display = 'none';
        document.getElementById('slide-image-fields').style.display = 'block';
        if (slide.image) {
          document.getElementById('slide-image-preview-img').src = slide.image;
          document.getElementById('slide-image-preview').style.display = 'block';
        }
      }
      
      document.getElementById('slide-modal-title').textContent = 'S·ª≠a Slide';
      document.getElementById('slide-modal').style.display = 'flex';
    };

    window.deleteSlide = function(id) {
      if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a slide n√†y?')) {
        slides = slides.filter(s => s.id !== id);
        renderSlides();
      }
    };

    document.getElementById('add-slide-btn').addEventListener('click', () => {
      currentEditingSlide = null;
      document.getElementById('slide-form').reset();
      document.getElementById('slide-id').value = '';
      document.getElementById('slide-type').value = 'content';
      document.getElementById('slide-order').value = slides.length + 1;
      document.getElementById('slide-content-fields').style.display = 'block';
      document.getElementById('slide-image-fields').style.display = 'none';
      document.getElementById('slide-modal-title').textContent = 'Th√™m Slide';
      document.getElementById('slide-modal').style.display = 'flex';
    });

    document.getElementById('slide-type').addEventListener('change', (e) => {
      if (e.target.value === 'content') {
        document.getElementById('slide-content-fields').style.display = 'block';
        document.getElementById('slide-image-fields').style.display = 'none';
      } else {
        document.getElementById('slide-content-fields').style.display = 'none';
        document.getElementById('slide-image-fields').style.display = 'block';
      }
    });

    document.getElementById('slide-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const id = document.getElementById('slide-id').value || 'slide-' + Date.now();
      const type = document.getElementById('slide-type').value;
      const order = parseInt(document.getElementById('slide-order').value);
      
      let slide = {
        id,
        type,
        order
      };

      if (type === 'content') {
        slide.title = document.getElementById('slide-title').value;
        slide.subtitle = document.getElementById('slide-subtitle').value;
        slide.description = document.getElementById('slide-description').value;
        slide.buttonText = document.getElementById('slide-buttonText').value;
        slide.buttonLink = document.getElementById('slide-buttonLink').value;
        slide.backgroundImage = '';
      } else {
        slide.image = document.getElementById('slide-image').value;
      }

      if (currentEditingSlide) {
        const index = slides.findIndex(s => s.id === currentEditingSlide.id);
        slides[index] = slide;
      } else {
        slides.push(slide);
      }

      document.getElementById('slide-modal').style.display = 'none';
      renderSlides();
    });

    document.getElementById('slide-cancel-btn').addEventListener('click', () => {
      document.getElementById('slide-modal').style.display = 'none';
      document.getElementById('slide-image-preview').style.display = 'none';
    });

    // Setup image upload for slide
    setupImageUpload('slide-image-file', 'slide-image', 'slide-image-preview', 'slide-image-preview-img');

    // Content Form Generator
    function createTextField(id, label, value = '', placeholder = '', rows = 1, helpText = '') {
      const isTextarea = rows > 1;
      const inputTag = isTextarea 
        ? `<textarea id="${id}" rows="${rows}" placeholder="${placeholder}" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem; font-family: inherit; resize: vertical;">${value}</textarea>`
        : `<input type="text" id="${id}" value="${value}" placeholder="${placeholder}" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem;">`;
      
      return `
        <div style="margin-bottom: 1.5rem;">
          <label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">${label}</label>
          ${inputTag}
          ${helpText ? `<p style="margin: 0.5rem 0 0 0; color: #666; font-size: 0.85rem;">${helpText}</p>` : ''}
        </div>
      `;
    }

    function createSection(title) {
      return {
        start: `<div style="margin-bottom: 2rem; padding: 1.5rem; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #FF5E14;"><h3 style="margin: 0 0 1rem 0; color: #333; font-size: 1.3rem; font-weight: 700;">${title}</h3>`,
        end: '</div>'
      };
    }

    function loadContentForm(page) {
      const container = document.getElementById('content-forms-container');
      let html = '';
      const pageData = content[page] || {};

      if (page === 'home') {
        const aboutSection = createSection('üìù About Section');
        html += aboutSection.start;
        html += createTextField('home-about-subtitle', 'Subtitle', pageData.about?.subtitle || '', 'ABOUT US');
        html += createTextField('home-about-titlePart1', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 1', pageData.about?.titlePart1 || '', 'GAMEGEEK ‚Äì ');
        html += createTextField('home-about-titleHighlight', 'Ti√™u ƒë·ªÅ - Ph·∫ßn t√¥ ƒë·∫≠m', pageData.about?.titleHighlight || '', 'THE GAMING CENTRAL HUB');
        html += createTextField('home-about-titlePart2', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 2', pageData.about?.titlePart2 || '', ' OF VIETNAM');
        html += createTextField('home-about-description', 'M√¥ t·∫£', pageData.about?.description || '', '', 4);
        html += createTextField('home-about-buttonText', 'Text n√∫t', pageData.about?.buttonText || '', 'More About Us');
        html += aboutSection.end;
        
        const servicesSection = createSection('üíº Services Section');
        html += servicesSection.start;
        html += createTextField('home-services-subtitle', 'Subtitle', pageData.services?.subtitle || '', 'OUR SERVICES');
        html += createTextField('home-services-titlePart1', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 1', pageData.services?.titlePart1 || '', 'End-to-End Solutions for ');
        html += createTextField('home-services-titleHighlight', 'Ti√™u ƒë·ªÅ - Ph·∫ßn t√¥ ƒë·∫≠m', pageData.services?.titleHighlight || '', 'Global Partners & Your Bridge');
        html += createTextField('home-services-titlePart2', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 2', pageData.services?.titlePart2 || '', ' to the Global Stage');
        
        // Service Items
        html += '<div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid #ddd;">';
        html += '<h4 style="margin: 0 0 1rem 0; color: #333; font-size: 1.1rem; font-weight: 600;">üìã Service Items (3 service cards)</h4>';
        
        const serviceItems = pageData.services?.items || [];
        for (let i = 0; i < 3; i++) {
          const item = serviceItems[i] || { title: '', items: [], linkText: '' };
          html += `<div style="margin-bottom: 2rem; padding: 1.5rem; background: white; border: 1px solid #e0e0e0; border-radius: 8px;">`;
          html += `<h5 style="margin: 0 0 1rem 0; color: #FF5E14; font-size: 1rem; font-weight: 600;">Service Card ${i + 1}</h5>`;
          html += createTextField(`home-services-items-${i}-title`, 'Ti√™u ƒë·ªÅ Service', item.title || '', 'MARKETING AGENCY');
          html += createTextField(`home-services-items-${i}-linkText`, 'Text n√∫t "Discover More"', item.linkText || '', 'Discover More');
          
          html += '<div style="margin-top: 1rem;">';
          html += '<label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Danh s√°ch d·ªãch v·ª• (m·ªói d√≤ng l√† 1 item)</label>';
          html += `<textarea id="home-services-items-${i}-items" rows="4" placeholder="Strategic Event Series\nB2B Matchmaking\nIntegrated Media Solutions" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem; font-family: inherit; resize: vertical;">${(item.items || []).join('\n')}</textarea>`;
          html += '<p style="margin: 0.5rem 0 0 0; color: #666; font-size: 0.85rem;">üí° M·ªói d√≤ng l√† m·ªôt d·ªãch v·ª• ri√™ng bi·ªát</p>';
          html += '</div>';
          
          html += '</div>';
        }
        
        html += '</div>';
        html += servicesSection.end;
        
        const networkSection = createSection('üåê Network Section');
        html += networkSection.start;
        html += createTextField('home-network-subtitle', 'Subtitle', pageData.network?.subtitle || '', 'OUR NETWORK');
        html += createTextField('home-network-titlePart1', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 1', pageData.network?.titlePart1 || '', 'Best Connector in ');
        html += createTextField('home-network-titleHighlight', 'Ti√™u ƒë·ªÅ - Ph·∫ßn t√¥ ƒë·∫≠m', pageData.network?.titleHighlight || '', 'Vietnam Market');
        html += createTextField('home-network-titlePart2', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 2', pageData.network?.titlePart2 || '', '');
        html += createTextField('home-network-buttonText', 'Text n√∫t', pageData.network?.buttonText || '', 'View All Services');
        
        // Network Stats
        html += '<div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid #ddd;">';
        html += '<h4 style="margin: 0 0 1rem 0; color: #333; font-size: 1.1rem; font-weight: 600;">üìä Network Stats (5 s·ªë li·ªáu th·ªëng k√™)</h4>';
        
        const networkStats = pageData.network?.stats || [];
        for (let i = 0; i < 5; i++) {
          const stat = networkStats[i] || { value: '', label: '' };
          html += `<div style="margin-bottom: 1.5rem; padding: 1.5rem; background: white; border: 1px solid #e0e0e0; border-radius: 8px;">`;
          html += `<h5 style="margin: 0 0 1rem 0; color: #FF5E14; font-size: 1rem; font-weight: 600;">Stat Card ${i + 1}</h5>`;
          html += createTextField(`home-network-stats-${i}-value`, 'S·ªë li·ªáu (v√≠ d·ª•: 200+, 300+, 7)', stat.value || '', '200+');
          html += createTextField(`home-network-stats-${i}-label`, 'Nh√£n m√¥ t·∫£', stat.label || '', 'Global Partners');
          html += '</div>';
        }
        
        html += '</div>';
        html += networkSection.end;
        
        const ctaSection = createSection('üì¢ CTA Section');
        html += ctaSection.start;
        html += createTextField('home-cta-titlePart1', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 1', pageData.cta?.titlePart1 || '', 'Vietnam - A Rising Hub for ');
        html += createTextField('home-cta-titleHighlight', 'Ti√™u ƒë·ªÅ - Ph·∫ßn t√¥ ƒë·∫≠m', pageData.cta?.titleHighlight || '', 'Game Production');
        html += createTextField('home-cta-titlePart2', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 2', pageData.cta?.titlePart2 || '', ' in Asia');
        html += ctaSection.end;
        
        const newsSection = createSection('üì∞ News & Insights Section');
        html += newsSection.start;
        html += createTextField('home-news-subtitle', 'Subtitle', pageData.news?.subtitle || '', 'NEWS & INSIGHTS');
        html += createTextField('home-news-titlePart1', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 1', pageData.news?.titlePart1 || '', '');
        html += createTextField('home-news-titleHighlight', 'Ti√™u ƒë·ªÅ - Ph·∫ßn t√¥ ƒë·∫≠m', pageData.news?.titleHighlight || '', 'Vietnam Gaming Landscape');
        html += createTextField('home-news-titlePart2', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 2', pageData.news?.titlePart2 || '', '');
        
        // News Stats
        html += '<div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid #ddd;">';
        html += '<h4 style="margin: 0 0 1rem 0; color: #333; font-size: 1.1rem; font-weight: 600;">üìä News Stats (8 s·ªë li·ªáu th·ªëng k√™)</h4>';
        
        const newsStats = pageData.news?.stats || [];
        for (let i = 0; i < 8; i++) {
          const stat = newsStats[i] || { label: '', prefix: '', value: '', suffix: '', description: '' };
          html += `<div style="margin-bottom: 1.5rem; padding: 1.5rem; background: white; border: 1px solid #e0e0e0; border-radius: 8px;">`;
          html += `<h5 style="margin: 0 0 1rem 0; color: #FF5E14; font-size: 1rem; font-weight: 600;">Stat Card ${i + 1}</h5>`;
          html += createTextField(`home-news-stats-${i}-label`, 'Nh√£n (v√≠ d·ª•: GLOBAL RANKING)', stat.label || '', 'GLOBAL RANKING');
          html += createTextField(`home-news-stats-${i}-prefix`, 'Ti·ªÅn t·ªë (v√≠ d·ª•: TOP , $)', stat.prefix || '', 'TOP ');
          html += createTextField(`home-news-stats-${i}-value`, 'Gi√° tr·ªã s·ªë (v√≠ d·ª•: 1, 6.1, 12)', stat.value || '', '1');
          html += createTextField(`home-news-stats-${i}-suffix`, 'H·∫≠u t·ªë (v√≠ d·ª•: B, %, K)', stat.suffix || '', '');
          html += createTextField(`home-news-stats-${i}-description`, 'M√¥ t·∫£', stat.description || '', '', 2);
          html += '</div>';
        }
        
        html += '</div>';
        html += newsSection.end;
      } else if (page === 'about') {
        const heroSection = createSection('üéØ Hero Section');
        html += heroSection.start;
        html += createTextField('about-hero-subtitle', 'Subtitle', pageData.hero?.subtitle || '', 'THE LOCAL VOICE');
        html += createTextField('about-hero-titlePart1', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 1', pageData.hero?.titlePart1 || '', 'The ');
        html += createTextField('about-hero-titleHighlight', 'Ti√™u ƒë·ªÅ - Ph·∫ßn t√¥ ƒë·∫≠m 1', pageData.hero?.titleHighlight || '', 'central hub ');
        html += createTextField('about-hero-titlePart2', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 2', pageData.hero?.titlePart2 || '', ' in Vietnam dedicated to the ');
        html += createTextField('about-hero-titleHighlight2', 'Ti√™u ƒë·ªÅ - Ph·∫ßn t√¥ ƒë·∫≠m 2', pageData.hero?.titleHighlight2 || '', 'Vietnamese Game Maker ');
        html += createTextField('about-hero-titlePart3', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 3', pageData.hero?.titlePart3 || '', 'Community');
        html += createTextField('about-hero-buttonText', 'Text n√∫t', pageData.hero?.buttonText || '', 'Our Services');
        html += heroSection.end;
        
        const aboutSection = createSection('üìñ About Section');
        html += aboutSection.start;
        html += createTextField('about-aboutSection-subtitle', 'Subtitle', pageData.aboutSection?.subtitle || '', 'WHO ARE WE?');
        html += createTextField('about-aboutSection-titlePart1', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 1', pageData.aboutSection?.titlePart1 || '', 'Vietnam\'s ');
        html += createTextField('about-aboutSection-titleHighlight', 'Ti√™u ƒë·ªÅ - Ph·∫ßn t√¥ ƒë·∫≠m', pageData.aboutSection?.titleHighlight || '', 'Gaming Central Hub ');
        html += createTextField('about-aboutSection-titlePart2', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 2', pageData.aboutSection?.titlePart2 || '', '');
        html += createTextField('about-aboutSection-description', 'M√¥ t·∫£', pageData.aboutSection?.description || '', '', 5);
        html += aboutSection.end;
        
        const teamSection = createSection('üë• Team Section');
        html += teamSection.start;
        html += createTextField('about-team-subtitle', 'Subtitle', pageData.team?.subtitle || '', 'MEET THE TEAM');
        html += createTextField('about-team-titlePart1', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 1', pageData.team?.titlePart1 || '', 'Connect and scale faster in ');
        html += createTextField('about-team-titleHighlight', 'Ti√™u ƒë·ªÅ - Ph·∫ßn t√¥ ƒë·∫≠m', pageData.team?.titleHighlight || '', 'Vietnam\'s game industry');
        html += createTextField('about-team-titlePart2', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 2', pageData.team?.titlePart2 || '', '');
        html += teamSection.end;
        
        // Stats Section
        const statsSection = createSection('üìä Stats (Th·ªëng k√™)');
        html += statsSection.start;
        html += '<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">';
        html += '<p style="margin: 0; color: #666; font-size: 0.9rem;">Qu·∫£n l√Ω c√°c th·ªëng k√™ hi·ªÉn th·ªã tr√™n trang About</p>';
        html += '<button type="button" id="add-stat-btn-about" style="padding: 0.5rem 1rem; border: none; background: #FF5E14; color: white; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.9rem;">+ Th√™m Stat</button>';
        html += '</div>';
        html += '<div id="stats-list-about" style="display: grid; gap: 1rem; margin-top: 1rem;">';
        html += '</div>';
        html += statsSection.end;
        
        // Vision Section
        const visionSection = createSection('üëÅÔ∏è Vision (T·∫ßm nh√¨n)');
        html += visionSection.start;
        html += createTextField('about-vision-title', 'Ti√™u ƒë·ªÅ', pageData.vision?.title || '', 'Vision');
        html += createTextField('about-vision-description', 'M√¥ t·∫£', pageData.vision?.description || '', '', 4);
        html += visionSection.end;
        
        // Mission Section
        const missionSection = createSection('üéØ Mission (S·ª© m·ªánh)');
        html += missionSection.start;
        html += createTextField('about-mission-title', 'Ti√™u ƒë·ªÅ', pageData.mission?.title || '', 'Mission');
        html += createTextField('about-mission-description', 'M√¥ t·∫£', pageData.mission?.description || '', '', 4);
        html += missionSection.end;
        
        const ctaSection = createSection('üì¢ CTA Section');
        html += ctaSection.start;
        html += createTextField('about-cta-titlePart1', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 1', pageData.cta?.titlePart1 || '', 'Your Next ');
        html += createTextField('about-cta-titleHighlight', 'Ti√™u ƒë·ªÅ - Ph·∫ßn t√¥ ƒë·∫≠m', pageData.cta?.titleHighlight || '', 'Big Event Starts Here ');
        html += createTextField('about-cta-titlePart2', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 2', pageData.cta?.titlePart2 || '', ' ‚Äì Let\'s Make It Extraordinary!');
        html += ctaSection.end;
      } else if (page === 'services') {
        const heroSection = createSection('üéØ Hero Section');
        html += heroSection.start;
        html += createTextField('services-hero-subtitle', 'Subtitle', pageData.hero?.subtitle || '', 'End-to-End Solutions for Global Partners');
        html += createTextField('services-hero-titlePart1', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 1', pageData.hero?.titlePart1 || '', 'One hub for ');
        html += createTextField('services-hero-titleHighlight', 'Ti√™u ƒë·ªÅ - T√¥ ƒë·∫≠m 1', pageData.hero?.titleHighlight || '', 'strategy,');
        html += createTextField('services-hero-titleHighlight2', 'Ti√™u ƒë·ªÅ - T√¥ ƒë·∫≠m 2', pageData.hero?.titleHighlight2 || '', 'execution,');
        html += createTextField('services-hero-titlePart4', 'Ti√™u ƒë·ªÅ - Ph·∫ßn gi·ªØa', pageData.hero?.titlePart4 || '', ' and');
        html += createTextField('services-hero-titleHighlight3', 'Ti√™u ƒë·ªÅ - T√¥ ƒë·∫≠m 3', pageData.hero?.titleHighlight3 || '', 'sustained growth');
        html += heroSection.end;
        
        const partnersSection = createSection('ü§ù Local Partners');
        html += partnersSection.start;
        html += createTextField('services-localPartners-subtitle', 'Subtitle', pageData.localPartners?.subtitle || '', 'LOCAL PARTNERS');
        html += createTextField('services-localPartners-titlePart1', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 1', pageData.localPartners?.titlePart1 || '', 'Your ');
        html += createTextField('services-localPartners-titleHighlight', 'Ti√™u ƒë·ªÅ - T√¥ ƒë·∫≠m 1', pageData.localPartners?.titleHighlight || '', 'Bridge ');
        html += createTextField('services-localPartners-titlePart2', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 2', pageData.localPartners?.titlePart2 || '', ' to the ');
        html += createTextField('services-localPartners-titleHighlight2', 'Ti√™u ƒë·ªÅ - T√¥ ƒë·∫≠m 2', pageData.localPartners?.titleHighlight2 || '', 'Global Stage');
        
        // Tabs Management
        html += '<div style="margin-top: 2rem; padding-top: 2rem; border-top: 2px solid #ddd;">';
        html += '<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">';
        html += '<h4 style="margin: 0; color: #333; font-size: 1.1rem; font-weight: 600;">üìë Qu·∫£n l√Ω Tabs (4 tabs)</h4>';
        html += '<button type="button" id="add-service-tab-btn" style="padding: 0.5rem 1rem; border: none; background: #FF5E14; color: white; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.9rem;">+ Th√™m Tab</button>';
        html += '</div>';
        html += '<div id="service-tabs-list" style="display: grid; gap: 1.5rem; margin-bottom: 2rem;">';
        html += '</div>';
        html += '</div>';
        
        html += partnersSection.end;
        
        // Service Slider Section
        const sliderSection = createSection('üñºÔ∏è Service Slider (·∫¢nh n·ªÅn thay ƒë·ªïi, text gi·ªØ nguy√™n)');
        html += sliderSection.start;
        html += '<p style="color: #666; margin-bottom: 1.5rem; padding: 1rem; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 4px;">';
        html += '<strong>üí° L∆∞u √Ω:</strong> Text c·ªßa 3 service cards b√™n d∆∞·ªõi s·∫Ω gi·ªØ nguy√™n v·ªõi m·ªçi slide. Ch·ªâ ·∫£nh n·ªÅn c·ªßa slide thay ƒë·ªïi.';
        html += '</p>';
        
        html += '<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">';
        html += '<h4 style="margin: 0; color: #333; font-size: 1.1rem; font-weight: 600;">Qu·∫£n l√Ω Slides (·∫¢nh n·ªÅn)</h4>';
        html += '<button type="button" id="add-service-slide-btn" style="padding: 0.5rem 1rem; border: none; background: #FF5E14; color: white; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.9rem;">+ Th√™m Slide</button>';
        html += '</div>';
        html += '<div id="service-slides-list" style="display: grid; gap: 1rem; margin-bottom: 2rem;">';
        html += '</div>';
        
        // Service Cards Text (Static - gi·ªØ nguy√™n v·ªõi m·ªçi slide)
        html += '<div style="margin-top: 2rem; padding-top: 2rem; border-top: 2px solid #ddd;">';
        html += '<h4 style="margin: 0 0 1.5rem 0; color: #333; font-size: 1.1rem; font-weight: 600;">üìã Service Cards Text (Gi·ªØ nguy√™n v·ªõi m·ªçi slide)</h4>';
        
        const serviceCards = pageData.serviceCards || [
          {
            title: 'MARKETING AGENCY',
            items: ['Event series', 'Business Match', 'Media hub / Package - agency for brands']
          },
          {
            title: 'GAMING BUSINESS',
            items: ['M&A games / Co-pub / Invest / Deal broker', 'Set up business gaming in VN', 'Accelerator / Incubator']
          },
          {
            title: 'GO TO MARKET SERVICES',
            items: ['Sale reference: APP MAGIC, PLAYABLE LABS', 'Go to market for specific services', 'Other: Recruitment, Education']
          }
        ];
        
        for (let i = 0; i < 3; i++) {
          const card = serviceCards[i] || { title: '', items: [] };
          html += `<div style="margin-bottom: 2rem; padding: 1.5rem; background: white; border: 1px solid #e0e0e0; border-radius: 8px;">`;
          html += `<h5 style="margin: 0 0 1rem 0; color: #FF5E14; font-size: 1rem; font-weight: 600;">Service Card ${i + 1}</h5>`;
          html += createTextField(`services-serviceCards-${i}-title`, 'Ti√™u ƒë·ªÅ', card.title || '', 'MARKETING AGENCY');
          html += '<div style="margin-top: 1rem;">';
          html += '<label style="display: block; margin-bottom: 0.5rem; color: #333; font-weight: 600;">Danh s√°ch items (m·ªói d√≤ng l√† 1 item)</label>';
          html += `<textarea id="services-serviceCards-${i}-items" rows="4" placeholder="Event series\nBusiness Match\nMedia hub / Package - agency for brands" style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem; font-family: inherit; resize: vertical;">${(card.items || []).join('\n')}</textarea>`;
          html += '<p style="margin: 0.5rem 0 0 0; color: #666; font-size: 0.85rem;">üí° M·ªói d√≤ng l√† m·ªôt item ri√™ng bi·ªát</p>';
          html += '</div>';
          html += '</div>';
        }
        
        html += '</div>';
        html += sliderSection.end;
        
        const ctaSection = createSection('üì¢ CTA Section');
        html += ctaSection.start;
        html += createTextField('services-cta-titlePart1', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 1', pageData.cta?.titlePart1 || '', 'Vietnam - A Rising Hub for ');
        html += createTextField('services-cta-titleHighlight', 'Ti√™u ƒë·ªÅ - T√¥ ƒë·∫≠m', pageData.cta?.titleHighlight || '', 'Game Production');
        html += createTextField('services-cta-titlePart2', 'Ti√™u ƒë·ªÅ - Ph·∫ßn 2', pageData.cta?.titlePart2 || '', ' in Asia');
        html += ctaSection.end;
      } else if (page === 'contact') {
        const heroSection = createSection('üéØ Hero Section');
        html += heroSection.start;
        html += createTextField('contact-hero-title', 'Ti√™u ƒë·ªÅ', pageData.hero?.title || '', 'Get In Touch');
        html += createTextField('contact-hero-description', 'M√¥ t·∫£', pageData.hero?.description || '', '', 3);
        html += heroSection.end;
        
        const formSection = createSection('üìã Form Section');
        html += formSection.start;
        html += createTextField('contact-form-title', 'Ti√™u ƒë·ªÅ form', pageData.form?.title || '', 'Send us a message');
        html += createTextField('contact-form-submitButton', 'Text n√∫t Submit', pageData.form?.submitButton || '', 'Send Message');
        html += formSection.end;
        
        const infoSection = createSection('‚ÑπÔ∏è Contact Info');
        html += infoSection.start;
        html += createTextField('contact-info-title', 'Ti√™u ƒë·ªÅ', pageData.info?.title || '', 'Contact Information');
        html += createTextField('contact-info-description', 'M√¥ t·∫£', pageData.info?.description || '', '', 3);
        html += createTextField('contact-info-email-value', 'Email', pageData.info?.email?.value || '', 'team@gamegeek.asia');
        html += createTextField('contact-info-phone-value', 'S·ªë ƒëi·ªán tho·∫°i', pageData.info?.phone?.value || '', '(+84) 902 122 120');
        html += createTextField('contact-info-address-value', 'ƒê·ªãa ch·ªâ (m·ªói d√≤ng c√°ch nhau b·ªüi \\n)', pageData.info?.address?.value || '', 'NIC Building, No 6 Lane 7 Ton That Thuyet\\nCau Giay, Hanoi', 3);
        html += infoSection.end;
      } else if (page === 'news') {
        const breadcrumbSection = createSection('üì∞ Breadcrumb');
        html += breadcrumbSection.start;
        html += createTextField('news-breadcrumb-title', 'Ti√™u ƒë·ªÅ', pageData.breadcrumb?.title || '', 'NEWS & INSIGHTS');
        html += createTextField('news-breadcrumb-home', 'Text Home', pageData.breadcrumb?.home || '', 'HOME');
        html += createTextField('news-breadcrumb-current', 'Text Current', pageData.breadcrumb?.current || '', 'BLOG');
        html += breadcrumbSection.end;
        
        const sidebarSection = createSection('üîç Sidebar');
        html += sidebarSection.start;
        html += createTextField('news-sidebar-search-placeholder', 'Placeholder t√¨m ki·∫øm', pageData.sidebar?.search?.placeholder || '', 'Search');
        html += createTextField('news-sidebar-categories-title', 'Ti√™u ƒë·ªÅ Categories', pageData.sidebar?.categories?.title || '', 'Categories');
        html += createTextField('news-sidebar-recentPosts-title', 'Ti√™u ƒë·ªÅ Recent Posts', pageData.sidebar?.recentPosts?.title || '', 'Recent Posts');
        html += createTextField('news-readMore', 'Text Read More', pageData.readMore || '', 'Read More');
        html += sidebarSection.end;
      } else if (page === 'blog') {
        const heroSection = createSection('üéØ Hero Section');
        html += heroSection.start;
        html += createTextField('blog-hero-title', 'Ti√™u ƒë·ªÅ', pageData.hero?.title || '', 'Our Blog');
        html += createTextField('blog-hero-description', 'M√¥ t·∫£', pageData.hero?.description || '', '', 3);
        html += heroSection.end;
        
        const newsletterSection = createSection('üìß Newsletter');
        html += newsletterSection.start;
        html += createTextField('blog-newsletter-title', 'Ti√™u ƒë·ªÅ', pageData.newsletter?.title || '', 'Stay Updated');
        html += createTextField('blog-newsletter-description', 'M√¥ t·∫£', pageData.newsletter?.description || '', '', 3);
        html += createTextField('blog-newsletter-placeholder', 'Placeholder email', pageData.newsletter?.placeholder || '', 'Enter your email');
        html += createTextField('blog-newsletter-button', 'Text n√∫t', pageData.newsletter?.button || '', 'Subscribe');
        html += newsletterSection.end;
      } else if (page === 'career') {
        const breadcrumbSection = createSection('üì∞ Breadcrumb');
        html += breadcrumbSection.start;
        html += createTextField('career-breadcrumb-title', 'Ti√™u ƒë·ªÅ', pageData.breadcrumb?.title || '', 'CAREERS');
        html += createTextField('career-breadcrumb-home', 'Text Home', pageData.breadcrumb?.home || '', 'HOME');
        html += createTextField('career-breadcrumb-current', 'Text Current', pageData.breadcrumb?.current || '', 'CAREERS');
        html += breadcrumbSection.end;
        
        const jobSection = createSection('üíº Job Info');
        html += jobSection.start;
        html += createTextField('career-applyButton', 'Text n√∫t Apply', pageData.applyButton || '', 'Apply Now');
        html += createTextField('career-jobMeta-location', 'Label Location', pageData.jobMeta?.location || '', 'Location:');
        html += createTextField('career-jobMeta-type', 'Label Type', pageData.jobMeta?.type || '', 'Type:');
        html += createTextField('career-jobMeta-experience', 'Label Experience', pageData.jobMeta?.experience || '', 'Experience:');
        html += jobSection.end;
      } else if (page === 'program') {
        const heroSection = createSection('üéØ Hero Section');
        html += heroSection.start;
        html += createTextField('program-hero-title', 'Ti√™u ƒë·ªÅ', pageData.hero?.title || '', 'OUR FEATURED PROGRAMS');
        html += heroSection.end;
        
        const eventsSection = createSection('üìÖ Upcoming Events');
        html += eventsSection.start;
        html += createTextField('program-upcomingEvents-title', 'Ti√™u ƒë·ªÅ', pageData.upcomingEvents?.title || '', 'UPCOMING EVENTS');
        html += eventsSection.end;
        
        const filtersSection = createSection('üîç Filters');
        html += filtersSection.start;
        html += createTextField('program-filters-searchButton', 'Text n√∫t Search', pageData.filters?.searchButton || '', 'Search Projects');
        html += filtersSection.end;
        
        const statusSection = createSection('üìä Event Status');
        html += statusSection.start;
        html += createTextField('program-eventStatus-upcoming', 'Text Upcoming', pageData.eventStatus?.upcoming || '', 'Upcoming');
        html += createTextField('program-eventStatus-completed', 'Text Completed', pageData.eventStatus?.completed || '', 'Completed');
        html += statusSection.end;
        
        const socialSection = createSection('üì± Social');
        html += socialSection.start;
        html += createTextField('program-followText', 'Text Follow Us', pageData.followText || '', 'Follow Us:');
        html += socialSection.end;
      } else if (page === 'navbar') {
        const menuSection = createSection('üß≠ Menu Items');
        html += menuSection.start;
        html += '<p style="color: #666; margin-bottom: 1rem;">Menu items ƒë∆∞·ª£c qu·∫£n l√Ω trong JSON. S·ª≠ d·ª•ng JSON Editor ƒë·ªÉ ch·ªânh s·ª≠a.</p>';
        html += createTextField('navbar-buttonText', 'Text n√∫t Get Started', pageData.buttonText || '', 'Get Started');
        html += menuSection.end;
      } else if (page === 'footer') {
        const footerSection = createSection('ü¶∂ Footer Content');
        html += footerSection.start;
        html += '<p style="color: #666; margin-bottom: 1rem;">Footer links ƒë∆∞·ª£c qu·∫£n l√Ω trong JSON. S·ª≠ d·ª•ng JSON Editor ƒë·ªÉ ch·ªânh s·ª≠a.</p>';
        html += createTextField('footer-address-address', 'ƒê·ªãa ch·ªâ', pageData.address?.address || '', 'NIC Building, No 6 Lane 7 Ton That Thuyet, Cau Giay, Hanoi');
        html += createTextField('footer-address-email', 'Email', pageData.address?.email || '', 'team@gamegeek.asia');
        html += createTextField('footer-address-phone', 'S·ªë ƒëi·ªán tho·∫°i', pageData.address?.phone || '', '(+84) 902 122 120');
        html += createTextField('footer-social-followText', 'Text Follow Us', pageData.social?.followText || '', 'Follow Us:');
        html += createTextField('footer-brandText', 'Text Brand', pageData.brandText || '', 'GAMEGEEK');
        html += footerSection.end;
      } else if (page === 'contactForm') {
        const formSection = createSection('üìã Contact Form');
        html += formSection.start;
        html += createTextField('contactForm-step1-question', 'C√¢u h·ªèi B∆∞·ªõc 1', pageData.step1?.question || '', 'You are‚Ä¶');
        html += createTextField('contactForm-step2-question', 'C√¢u h·ªèi B∆∞·ªõc 2', pageData.step2?.question || '', 'What are you looking for?');
        html += createTextField('contactForm-step3-title', 'Ti√™u ƒë·ªÅ B∆∞·ªõc 3', pageData.step3?.title || '', 'Contact Information');
        html += createTextField('contactForm-step3-description', 'M√¥ t·∫£ B∆∞·ªõc 3', pageData.step3?.description || '', '', 3);
        html += createTextField('contactForm-step3-submitButton', 'Text n√∫t Submit', pageData.step3?.submitButton || '', 'Submit');
        html += formSection.end;
      }

      container.innerHTML = html;
      
      // Setup handlers for about page
      if (page === 'about') {
        renderStats('stats-list-about');
        setupAddStatButton();
        setupVisionMissionHandlers();
      }
      
      // Setup handlers for services page
      if (page === 'services') {
        renderServiceSlides();
        setupServiceSlideHandlers();
        renderServiceTabs();
        setupServiceTabHandlers();
      }
    }
    
    // Service Tabs Functions
    function renderServiceTabs() {
      const container = document.getElementById('service-tabs-list');
      if (!container) return;
      
      if (serviceTabs.length === 0) {
        container.innerHTML = '<p style="color: #666; text-align: center; padding: 2rem;">Ch∆∞a c√≥ tab n√†o. Click "Th√™m Tab" ƒë·ªÉ th√™m m·ªõi.</p>';
        return;
      }
      
      container.innerHTML = serviceTabs.map((tab, index) => `
        <div style="padding: 1.5rem; background: #f8f9fa; border-radius: 8px; border: 1px solid #e0e0e0;">
          <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem;">
            <div style="flex: 1;">
              <h5 style="margin: 0 0 0.5rem 0; color: #333; font-size: 1.1rem; font-weight: 600;">Tab ${index + 1}: ${tab.name || 'Ch∆∞a c√≥ t√™n'}</h5>
              <p style="margin: 0 0 0.5rem 0; color: #666; font-size: 0.9rem;">${tab.description || 'Ch∆∞a c√≥ m√¥ t·∫£'}</p>
              <p style="margin: 0; color: #999; font-size: 0.85rem;">·∫¢nh: ${tab.image || 'Ch∆∞a c√≥ ·∫£nh'}</p>
              <p style="margin: 0.5rem 0 0 0; color: #666; font-size: 0.9rem;">Items: ${(tab.items || []).length} m·ª•c</p>
            </div>
            <div style="display: flex; gap: 0.5rem; margin-left: 1rem; flex-shrink: 0;">
              <button onclick="editServiceTab(${index})" style="padding: 0.5rem 1rem; border: 1px solid #FF5E14; background: white; color: #FF5E14; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.85rem;">
                S·ª≠a
              </button>
              <button onclick="deleteServiceTab(${index})" style="padding: 0.5rem 1rem; border: none; background: #dc3545; color: white; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.85rem;">
                X√≥a
              </button>
            </div>
          </div>
          ${tab.image ? `<img src="${tab.image}" alt="Tab ${index + 1}" style="width: 100%; max-width: 200px; height: 120px; object-fit: cover; border-radius: 6px; border: 1px solid #ddd;" onerror="this.style.display='none'">` : ''}
        </div>
      `).join('');
    }
    
    window.editServiceTab = function(index) {
      const tab = serviceTabs[index];
      currentEditingServiceTabIndex = index;
      currentEditingServiceTabItems = JSON.parse(JSON.stringify(tab.items || []));
      
      document.getElementById('service-tab-index').value = index;
      document.getElementById('service-tab-name').value = tab.name || '';
      document.getElementById('service-tab-description').value = tab.description || '';
      document.getElementById('service-tab-image').value = tab.image || '';
      document.getElementById('service-tab-modal-title').textContent = 'S·ª≠a Tab';
      
      // Show preview if image exists
      if (tab.image) {
        document.getElementById('service-tab-image-preview-img').src = tab.image;
        document.getElementById('service-tab-image-preview').style.display = 'block';
      }
      
      renderServiceTabItems();
      document.getElementById('service-tab-modal').style.display = 'flex';
    };
    
    window.deleteServiceTab = function(index) {
      if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a tab n√†y?')) {
        serviceTabs.splice(index, 1);
        renderServiceTabs();
        // Update content
        if (!content.services) content.services = {};
        content.services.tabs = serviceTabs;
      }
    };
    
    function renderServiceTabItems() {
      const container = document.getElementById('service-tab-items-list');
      if (!container) return;
      
      if (currentEditingServiceTabItems.length === 0) {
        container.innerHTML = '<p style="color: #666; text-align: center; padding: 1rem;">Ch∆∞a c√≥ item n√†o. Click "+ Th√™m Item" ƒë·ªÉ th√™m.</p>';
        return;
      }
      
      container.innerHTML = currentEditingServiceTabItems.map((item, itemIndex) => `
        <div style="padding: 1rem; background: white; border: 1px solid #e0e0e0; border-radius: 6px;">
          <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.5rem;">
            <h6 style="margin: 0; color: #333; font-size: 0.95rem; font-weight: 600;">Item ${itemIndex + 1}</h6>
            <button type="button" onclick="removeServiceTabItem(${itemIndex})" style="padding: 0.25rem 0.75rem; border: none; background: #dc3545; color: white; border-radius: 4px; cursor: pointer; font-weight: 600; font-size: 0.75rem;">
              X√≥a
            </button>
          </div>
          <div style="display: grid; grid-template-columns: 80px 1fr; gap: 0.5rem; margin-bottom: 0.5rem;">
            <input type="text" id="service-tab-item-${itemIndex}-number" value="${item.number || ''}" placeholder="01" style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; font-size: 0.9rem;" onchange="updateServiceTabItem(${itemIndex}, 'number', this.value)">
            <input type="text" id="service-tab-item-${itemIndex}-title" value="${item.title || ''}" placeholder="Title" style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; font-size: 0.9rem;" onchange="updateServiceTabItem(${itemIndex}, 'title', this.value)">
          </div>
          <textarea id="service-tab-item-${itemIndex}-description" rows="2" placeholder="Description" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; font-size: 0.9rem; font-family: inherit; resize: vertical;" onchange="updateServiceTabItem(${itemIndex}, 'description', this.value)">${item.description || ''}</textarea>
        </div>
      `).join('');
    }
    
    window.addServiceTabItem = function() {
      currentEditingServiceTabItems.push({
        number: '',
        title: '',
        description: ''
      });
      renderServiceTabItems();
    };
    
    window.removeServiceTabItem = function(index) {
      currentEditingServiceTabItems.splice(index, 1);
      renderServiceTabItems();
    };
    
    window.updateServiceTabItem = function(index, field, value) {
      if (currentEditingServiceTabItems[index]) {
        currentEditingServiceTabItems[index][field] = value;
      }
    };
    
    function setupServiceTabHandlers() {
      const addBtn = document.getElementById('add-service-tab-btn');
      if (addBtn && !addBtn.dataset.handlerSetup) {
        addBtn.dataset.handlerSetup = 'true';
        addBtn.addEventListener('click', () => {
          currentEditingServiceTabIndex = null;
          currentEditingServiceTabItems = [];
          document.getElementById('service-tab-form').reset();
          document.getElementById('service-tab-index').value = '';
          document.getElementById('service-tab-image-preview').style.display = 'none';
          document.getElementById('service-tab-modal-title').textContent = 'Th√™m Tab';
          renderServiceTabItems();
          document.getElementById('service-tab-modal').style.display = 'flex';
        });
      }
      
      const addItemBtn = document.getElementById('add-service-tab-item-btn');
      if (addItemBtn && !addItemBtn.dataset.handlerSetup) {
        addItemBtn.dataset.handlerSetup = 'true';
        addItemBtn.addEventListener('click', () => {
          addServiceTabItem();
        });
      }
      
      const form = document.getElementById('service-tab-form');
      if (form && !form.dataset.handlerSetup) {
        form.dataset.handlerSetup = 'true';
        form.addEventListener('submit', (e) => {
          e.preventDefault();
          const name = document.getElementById('service-tab-name').value.trim();
          const description = document.getElementById('service-tab-description').value.trim();
          const image = document.getElementById('service-tab-image').value.trim();
          const index = document.getElementById('service-tab-index').value;

          if (!name || !description || !image) {
            alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!');
            return;
          }

          const tab = {
            name: name,
            description: description,
            image: image,
            items: currentEditingServiceTabItems.filter(item => item.number || item.title || item.description)
          };

          if (index !== '' && currentEditingServiceTabIndex !== null) {
            serviceTabs[currentEditingServiceTabIndex] = tab;
          } else {
            serviceTabs.push(tab);
          }

          // Update content
          if (!content.services) content.services = {};
          content.services.tabs = serviceTabs;

          document.getElementById('service-tab-modal').style.display = 'none';
          renderServiceTabs();
        });
      }
      
      const cancelBtn = document.getElementById('service-tab-cancel-btn');
      if (cancelBtn && !cancelBtn.dataset.handlerSetup) {
        cancelBtn.dataset.handlerSetup = 'true';
        cancelBtn.addEventListener('click', () => {
          document.getElementById('service-tab-modal').style.display = 'none';
        });
      }
      
      // Setup image upload and preview for tab
      const fileInput = document.getElementById('service-tab-image-file');
      const textInput = document.getElementById('service-tab-image');
      const preview = document.getElementById('service-tab-image-preview');
      const previewImg = document.getElementById('service-tab-image-preview-img');
      
      if (fileInput && textInput && preview && previewImg) {
        fileInput.addEventListener('change', (e) => {
          const file = e.target.files[0];
          if (file) {
            if (file.size > 5 * 1024 * 1024) {
              alert('File qu√° l·ªõn! Vui l√≤ng ch·ªçn file nh·ªè h∆°n 5MB.');
              return;
            }

            const reader = new FileReader();
            reader.onload = (event) => {
              const base64 = event.target.result;
              previewImg.src = base64;
              preview.style.display = 'block';
              
              if (file.size < 500 * 1024) {
                textInput.value = base64;
              } else {
                textInput.value = '';
                alert('File l·ªõn h∆°n 500KB. Vui l√≤ng:\n1. Upload l√™n ImgBB/Cloudinary v√† nh·∫≠p URL\n2. Ho·∫∑c copy file v√†o public/images/ v√† nh·∫≠p ƒë∆∞·ªùng d·∫´n /images/t√™n-file.jpg');
              }
            };
            reader.readAsDataURL(file);
          }
        });

        textInput.addEventListener('input', (e) => {
          const url = e.target.value;
          if (url && (url.startsWith('http') || url.startsWith('data:image') || url.startsWith('/images') || url.startsWith('/renius'))) {
            previewImg.src = url;
            preview.style.display = 'block';
          } else if (!url) {
            preview.style.display = 'none';
          }
        });
      }
    }
    
    // Service Slides Functions
    function renderServiceSlides() {
      const container = document.getElementById('service-slides-list');
      if (!container) return;
      
      if (serviceSlides.length === 0) {
        container.innerHTML = '<p style="color: #666; text-align: center; padding: 2rem;">Ch∆∞a c√≥ slide n√†o. Click "Th√™m Slide" ƒë·ªÉ th√™m m·ªõi.</p>';
        return;
      }
      
      const sortedSlides = [...serviceSlides].sort((a, b) => (a.order || 0) - (b.order || 0));
      container.innerHTML = sortedSlides.map((slide, index) => {
        const actualIndex = serviceSlides.findIndex(s => s === slide);
        return `
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: white; border-radius: 6px; border: 1px solid #e0e0e0;">
            <div style="flex: 1; display: flex; align-items: center; gap: 1rem;">
              <div style="min-width: 120px; height: 80px; border-radius: 6px; overflow: hidden; border: 1px solid #e0e0e0; flex-shrink: 0;">
                <img src="${slide.image || ''}" alt="Slide ${index + 1}" style="width: 100%; height: 100%; object-fit: cover;" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'120\' height=\'80\'%3E%3Crect fill=\'%23ddd\' width=\'120\' height=\'80\'/%3E%3Ctext x=\'50%25\' y=\'50%25\' text-anchor=\'middle\' dy=\'.3em\' fill=\'%23999\' font-size=\'12\'%3ENo Image%3C/text%3E%3C/svg%3E'">
              </div>
              <div style="flex: 1;">
                <p style="margin: 0 0 0.25rem 0; color: #333; font-size: 1rem; font-weight: 600;">Slide ${index + 1}</p>
                <p style="margin: 0; color: #666; font-size: 0.9rem;">Order: ${slide.order || index + 1}</p>
                <p style="margin: 0.25rem 0 0 0; color: #999; font-size: 0.85rem; word-break: break-all;">${slide.image || 'Ch∆∞a c√≥ ·∫£nh'}</p>
              </div>
            </div>
            <div style="display: flex; gap: 0.5rem; margin-left: 1rem; flex-shrink: 0;">
              <button onclick="editServiceSlide(${actualIndex})" style="padding: 0.5rem 1rem; border: 1px solid #FF5E14; background: white; color: #FF5E14; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.85rem;">
                S·ª≠a
              </button>
              <button onclick="deleteServiceSlide(${actualIndex})" style="padding: 0.5rem 1rem; border: none; background: #dc3545; color: white; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.85rem;">
                X√≥a
              </button>
            </div>
          </div>
        `;
      }).join('');
    }
    
    window.editServiceSlide = function(index) {
      const slide = serviceSlides[index];
      currentEditingServiceSlideIndex = index;
      document.getElementById('service-slide-index').value = index;
      document.getElementById('service-slide-image').value = slide.image || '';
      document.getElementById('service-slide-order').value = slide.order || index + 1;
      document.getElementById('service-slide-modal-title').textContent = 'S·ª≠a Service Slide';
      
      // Show preview if image exists
      if (slide.image) {
        document.getElementById('service-slide-image-preview-img').src = slide.image;
        document.getElementById('service-slide-image-preview').style.display = 'block';
      }
      
      document.getElementById('service-slide-modal').style.display = 'flex';
    };
    
    window.deleteServiceSlide = function(index) {
      if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a slide n√†y?')) {
        serviceSlides.splice(index, 1);
        renderServiceSlides();
        // Update content
        if (!content.services) content.services = {};
        content.services.serviceSlides = serviceSlides;
      }
    };
    
    function setupServiceSlideHandlers() {
      const addBtn = document.getElementById('add-service-slide-btn');
      if (addBtn && !addBtn.dataset.handlerSetup) {
        addBtn.dataset.handlerSetup = 'true';
        addBtn.addEventListener('click', () => {
          currentEditingServiceSlideIndex = null;
          document.getElementById('service-slide-form').reset();
          document.getElementById('service-slide-index').value = '';
          document.getElementById('service-slide-order').value = serviceSlides.length + 1;
          document.getElementById('service-slide-image-preview').style.display = 'none';
          document.getElementById('service-slide-modal-title').textContent = 'Th√™m Service Slide';
          document.getElementById('service-slide-modal').style.display = 'flex';
        });
      }
      
      const form = document.getElementById('service-slide-form');
      if (form && !form.dataset.handlerSetup) {
        form.dataset.handlerSetup = 'true';
        form.addEventListener('submit', (e) => {
          e.preventDefault();
          const image = document.getElementById('service-slide-image').value.trim();
          const order = parseInt(document.getElementById('service-slide-order').value) || 1;
          const index = document.getElementById('service-slide-index').value;

          if (!image) {
            alert('Vui l√≤ng nh·∫≠p ·∫£nh cho slide!');
            return;
          }

          const slide = {
            image: image,
            order: order
          };

          if (index !== '' && currentEditingServiceSlideIndex !== null) {
            serviceSlides[currentEditingServiceSlideIndex] = slide;
          } else {
            serviceSlides.push(slide);
          }

          // Update content
          if (!content.services) content.services = {};
          content.services.serviceSlides = serviceSlides;

          document.getElementById('service-slide-modal').style.display = 'none';
          renderServiceSlides();
        });
      }
      
      const cancelBtn = document.getElementById('service-slide-cancel-btn');
      if (cancelBtn && !cancelBtn.dataset.handlerSetup) {
        cancelBtn.dataset.handlerSetup = 'true';
        cancelBtn.addEventListener('click', () => {
          document.getElementById('service-slide-modal').style.display = 'none';
        });
      }
      
      // Setup image upload and preview
      const fileInput = document.getElementById('service-slide-image-file');
      const textInput = document.getElementById('service-slide-image');
      const preview = document.getElementById('service-slide-image-preview');
      const previewImg = document.getElementById('service-slide-image-preview-img');
      
      if (fileInput && textInput && preview && previewImg) {
        fileInput.addEventListener('change', (e) => {
          const file = e.target.files[0];
          if (file) {
            if (file.size > 5 * 1024 * 1024) {
              alert('File qu√° l·ªõn! Vui l√≤ng ch·ªçn file nh·ªè h∆°n 5MB.');
              return;
            }

            const reader = new FileReader();
            reader.onload = (event) => {
              const base64 = event.target.result;
              previewImg.src = base64;
              preview.style.display = 'block';
              
              if (file.size < 500 * 1024) {
                textInput.value = base64;
              } else {
                textInput.value = '';
                alert('File l·ªõn h∆°n 500KB. Vui l√≤ng:\n1. Upload l√™n ImgBB/Cloudinary v√† nh·∫≠p URL\n2. Ho·∫∑c copy file v√†o public/images/ v√† nh·∫≠p ƒë∆∞·ªùng d·∫´n /images/t√™n-file.jpg');
              }
            };
            reader.readAsDataURL(file);
          }
        });

        textInput.addEventListener('input', (e) => {
          const url = e.target.value;
          if (url && (url.startsWith('http') || url.startsWith('data:image') || url.startsWith('/images'))) {
            previewImg.src = url;
            preview.style.display = 'block';
          } else if (!url) {
            preview.style.display = 'none';
          }
        });
      }
    }

    // Page selector change handler
    document.getElementById('content-page-selector').addEventListener('change', (e) => {
      const page = e.target.value;
      if (page === 'about') {
        reloadStatsFromContent();
      } else if (page === 'services') {
        reloadServiceSlidesFromContent();
      }
      loadContentForm(page);
    });

    // Save content from forms
    function saveContentFromForms() {
      const page = document.getElementById('content-page-selector').value;
      const pageData = {};

      // Get all input values for current page
      const inputs = document.querySelectorAll('#content-forms-container input, #content-forms-container textarea');
      
      // Special handling for about page - stats, vision, mission
      if (page === 'about') {
        // Save stats
        pageData.features = stats;
        
        // Vision and mission are handled by regular input fields
        const visionTitle = document.getElementById('about-vision-title');
        const visionDesc = document.getElementById('about-vision-description');
        const missionTitle = document.getElementById('about-mission-title');
        const missionDesc = document.getElementById('about-mission-description');
        
        if (visionTitle && visionDesc) {
          pageData.vision = {
            title: visionTitle.value || 'Vision',
            description: visionDesc.value || ''
          };
        }
        
        if (missionTitle && missionDesc) {
          pageData.mission = {
            title: missionTitle.value || 'Mission',
            description: missionDesc.value || ''
          };
        }
      }
      
      // Special handling for services page - service slides, service cards, and tabs
      if (page === 'services') {
        // Save service slides
        pageData.serviceSlides = serviceSlides;
        
        // Save service cards text
        const serviceCards = [];
        for (let i = 0; i < 3; i++) {
          const titleInput = document.getElementById(`services-serviceCards-${i}-title`);
          const itemsTextarea = document.getElementById(`services-serviceCards-${i}-items`);
          
          if (titleInput || itemsTextarea) {
            const items = itemsTextarea ? itemsTextarea.value.split('\n').filter(item => item.trim() !== '') : [];
            serviceCards.push({
              title: titleInput ? titleInput.value : '',
              items: items
            });
          }
        }
        
        if (serviceCards.length > 0) {
          pageData.serviceCards = serviceCards;
        }
        
        // Save service tabs
        pageData.tabs = serviceTabs;
      }
      
      // Special handling for service items and network stats
      if (page === 'home') {
        // Service Items
        const serviceItems = [];
        for (let i = 0; i < 3; i++) {
          const titleInput = document.getElementById(`home-services-items-${i}-title`);
          const linkTextInput = document.getElementById(`home-services-items-${i}-linkText`);
          const itemsTextarea = document.getElementById(`home-services-items-${i}-items`);
          
          if (titleInput || linkTextInput || itemsTextarea) {
            const items = itemsTextarea ? itemsTextarea.value.split('\n').filter(item => item.trim() !== '') : [];
            serviceItems.push({
              title: titleInput ? titleInput.value : '',
              items: items,
              linkText: linkTextInput ? linkTextInput.value : ''
            });
          }
        }
        
        // Save service items if they exist
        if (serviceItems.length > 0) {
          if (!pageData.services) {
            pageData.services = {};
          }
          pageData.services.items = serviceItems;
        }
        
        // Network Stats
        const networkStats = [];
        for (let i = 0; i < 5; i++) {
          const valueInput = document.getElementById(`home-network-stats-${i}-value`);
          const labelInput = document.getElementById(`home-network-stats-${i}-label`);
          
          if (valueInput || labelInput) {
            networkStats.push({
              value: valueInput ? valueInput.value : '',
              label: labelInput ? labelInput.value : ''
            });
          }
        }
        
        // Save network stats if they exist
        if (networkStats.length > 0) {
          if (!pageData.network) {
            pageData.network = {};
          }
          pageData.network.stats = networkStats;
        }
        
        // News Stats
        const newsStats = [];
        for (let i = 0; i < 8; i++) {
          const labelInput = document.getElementById(`home-news-stats-${i}-label`);
          const prefixInput = document.getElementById(`home-news-stats-${i}-prefix`);
          const valueInput = document.getElementById(`home-news-stats-${i}-value`);
          const suffixInput = document.getElementById(`home-news-stats-${i}-suffix`);
          const descriptionInput = document.getElementById(`home-news-stats-${i}-description`);
          
          if (labelInput || prefixInput || valueInput || suffixInput || descriptionInput) {
            newsStats.push({
              label: labelInput ? labelInput.value : '',
              prefix: prefixInput ? prefixInput.value : '',
              value: valueInput ? valueInput.value : '',
              suffix: suffixInput ? suffixInput.value : '',
              description: descriptionInput ? descriptionInput.value : ''
            });
          }
        }
        
        // Save news stats if they exist
        if (newsStats.length > 0) {
          if (!pageData.news) {
            pageData.news = {};
          }
          pageData.news.stats = newsStats;
        }
      }
      
      inputs.forEach(input => {
        const id = input.id;
        if (id.startsWith(page + '-')) {
          // Skip service items, network stats, and news stats as they're handled above
          if ((id.includes('services-items-') && (id.includes('-title') || id.includes('-linkText') || id.includes('-items'))) ||
              (id.includes('network-stats-') && (id.includes('-value') || id.includes('-label'))) ||
              (id.includes('news-stats-') && (id.includes('-label') || id.includes('-prefix') || id.includes('-value') || id.includes('-suffix') || id.includes('-description')))) {
            return;
          }
          
          const path = id.replace(page + '-', '').split('-');
          let current = pageData;
          for (let i = 0; i < path.length - 1; i++) {
            if (!current[path[i]]) {
              current[path[i]] = {};
            }
            current = current[path[i]];
          }
          current[path[path.length - 1]] = input.value;
        }
      });

      // Merge with existing content to preserve structure
      if (content[page]) {
        Object.assign(content[page], pageData);
      } else {
        content[page] = pageData;
      }
      
      // Also update JSON editor if visible
      if (document.getElementById('json-editor-container').style.display !== 'none') {
        document.getElementById('content-json').value = JSON.stringify(content, null, 2);
      }
    }

    // Auto-save on input change
    document.addEventListener('input', (e) => {
      if (e.target.closest('#content-forms-container')) {
        saveContentFromForms();
      }
    });

    // Toggle JSON Editor
    document.getElementById('toggle-json-editor').addEventListener('click', () => {
      const container = document.getElementById('json-editor-container');
      const button = document.getElementById('toggle-json-editor');
      if (container.style.display === 'none') {
        container.style.display = 'block';
        button.textContent = '·∫®n JSON Editor';
        // Update JSON from current content
        document.getElementById('content-json').value = JSON.stringify(content, null, 2);
      } else {
        container.style.display = 'none';
        button.textContent = 'Hi·ªán JSON Editor';
      }
    });

    // Text Content functions
    document.getElementById('content-validate-btn').addEventListener('click', () => {
      const jsonText = document.getElementById('content-json').value;
      try {
        JSON.parse(jsonText);
        alert('‚úì JSON h·ª£p l·ªá!');
      } catch (error) {
        alert('‚úó JSON kh√¥ng h·ª£p l·ªá:\n' + error.message);
      }
    });

    document.getElementById('content-reset-btn').addEventListener('click', () => {
      if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën reset v·ªÅ gi√° tr·ªã ban ƒë·∫ßu? T·∫•t c·∫£ thay ƒë·ªïi s·∫Ω m·∫•t.')) {
        content = JSON.parse(JSON.stringify(contentData)); // Reset to original
        document.getElementById('content-json').value = JSON.stringify(content, null, 2);
        loadContentForm(document.getElementById('content-page-selector').value);
      }
    });

    // Update content when textarea changes
    document.getElementById('content-json').addEventListener('input', (e) => {
      try {
        const newContent = JSON.parse(e.target.value);
        content = newContent;
        // Remove error styling if JSON is valid
        e.target.style.borderColor = '#ddd';
        // Reload current form
        loadContentForm(document.getElementById('content-page-selector').value);
      } catch (error) {
        // Show error styling
        e.target.style.borderColor = '#dc3545';
      }
    });

    // Save function
    document.getElementById('save-btn').addEventListener('click', () => {
      const newsData = {
        categories,
        posts
      };
      
      const slidesData = {
        slides: slides.sort((a, b) => a.order - b.order)
      };
      
      // Validate content JSON before saving
      let contentDataToSave = content;
      try {
        const contentText = document.getElementById('content-json').value;
        if (contentText) {
          contentDataToSave = JSON.parse(contentText);
        }
      } catch (error) {
        if (confirm('Content JSON kh√¥ng h·ª£p l·ªá. B·∫°n c√≥ mu·ªën ti·∫øp t·ª•c l∆∞u c√°c file kh√°c kh√¥ng?')) {
          // Continue without content.json
        } else {
          return;
        }
      }
      
      // Save news.json
      const newsBlob = new Blob([JSON.stringify(newsData, null, 2)], { type: 'application/json' });
      const newsUrl = URL.createObjectURL(newsBlob);
      const newsA = document.createElement('a');
      newsA.href = newsUrl;
      newsA.download = 'news.json';
      newsA.click();
      URL.revokeObjectURL(newsUrl);
      
      // Save slides.json
      const slidesBlob = new Blob([JSON.stringify(slidesData, null, 2)], { type: 'application/json' });
      const slidesUrl = URL.createObjectURL(slidesBlob);
      const slidesA = document.createElement('a');
      slidesA.href = slidesUrl;
      slidesA.download = 'slides.json';
      setTimeout(() => {
        slidesA.click();
        URL.revokeObjectURL(slidesUrl);
      }, 500);
      
      // Update stats, vision, mission in content before saving
      if (!contentDataToSave.about) {
        contentDataToSave.about = {};
      }
      contentDataToSave.about.features = stats;
      contentDataToSave.about.vision = vision;
      contentDataToSave.about.mission = mission;
      
      // Save content.json if valid
      if (contentDataToSave) {
        setTimeout(() => {
          const contentBlob = new Blob([JSON.stringify(contentDataToSave, null, 2)], { type: 'application/json' });
          const contentUrl = URL.createObjectURL(contentBlob);
          const contentA = document.createElement('a');
          contentA.href = contentUrl;
          contentA.download = 'content.json';
          contentA.click();
          URL.revokeObjectURL(contentUrl);
        }, 1000);
        
        alert('ƒê√£ t·∫£i 3 file JSON:\n1. news.json - thay th·∫ø src/data/news.json\n2. slides.json - thay th·∫ø src/data/slides.json\n3. content.json - thay th·∫ø src/data/content.json\nSau ƒë√≥ rebuild d·ª± √°n.');
      } else {
        alert('ƒê√£ t·∫£i 2 file JSON:\n1. news.json - thay th·∫ø src/data/news.json\n2. slides.json - thay th·∫ø src/data/slides.json\nSau ƒë√≥ rebuild d·ª± √°n.');
      }
    });

    // Stats, Vision & Mission Functions
    function renderStats(containerId = 'stats-list-about') {
      const container = document.getElementById(containerId);
      if (!container) return;
      
      if (stats.length === 0) {
        container.innerHTML = '<p style="color: #666; text-align: center; padding: 2rem;">Ch∆∞a c√≥ stat n√†o. Click "Th√™m Stat" ƒë·ªÉ th√™m m·ªõi.</p>';
        return;
      }
      
      container.innerHTML = stats.map((stat, index) => {
        const valueDisplay = stat.value.includes('\\n') 
          ? stat.value.split('\\n').map(line => `<div style="line-height: 1.2; font-size: 0.9rem;">${line}</div>`).join('')
          : `<div style="font-size: ${stat.value.includes('.') ? '1.1rem' : '1.3rem'};">${stat.value}</div>`;
        
        return `
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: white; border-radius: 6px; border: 1px solid #e0e0e0;">
            <div style="flex: 1;">
              <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="min-width: 60px; width: 60px; height: 60px; background: #FFD700; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #333; flex-shrink: 0; text-align: center; padding: 0.25rem;">
                  ${valueDisplay}
                </div>
                <div style="flex: 1;">
                  <p style="margin: 0; color: #333; font-size: 0.95rem; line-height: 1.4;">${stat.description}</p>
                </div>
              </div>
            </div>
            <div style="display: flex; gap: 0.5rem; margin-left: 1rem; flex-shrink: 0;">
              <button onclick="editStat(${index})" style="padding: 0.5rem 1rem; border: 1px solid #FF5E14; background: white; color: #FF5E14; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.85rem;">
                S·ª≠a
              </button>
              <button onclick="deleteStat(${index})" style="padding: 0.5rem 1rem; border: none; background: #dc3545; color: white; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.85rem;">
                X√≥a
              </button>
            </div>
          </div>
        `;
      }).join('');
    }

    window.editStat = function(index) {
      const stat = stats[index];
      currentEditingStatIndex = index;
      document.getElementById('stat-index').value = index;
      document.getElementById('stat-value').value = stat.value;
      document.getElementById('stat-description').value = stat.description;
      document.getElementById('stat-modal-title').textContent = 'S·ª≠a Stat';
      document.getElementById('stat-modal').style.display = 'flex';
    };

    window.deleteStat = function(index) {
      if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a stat n√†y?')) {
        stats.splice(index, 1);
        renderStats('stats-list-about');
        // Update content
        if (!content.about) content.about = {};
        content.about.features = stats;
      }
    };

    // Add stat button handler - check which container exists
    function setupAddStatButton() {
      const addBtnAbout = document.getElementById('add-stat-btn-about');
      if (addBtnAbout) {
        addBtnAbout.addEventListener('click', () => {
          currentEditingStatIndex = null;
          document.getElementById('stat-form').reset();
          document.getElementById('stat-index').value = '';
          document.getElementById('stat-modal-title').textContent = 'Th√™m Stat';
          document.getElementById('stat-modal').style.display = 'flex';
        });
      }
    }

    document.getElementById('stat-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const value = document.getElementById('stat-value').value.trim();
      const description = document.getElementById('stat-description').value.trim();
      const index = document.getElementById('stat-index').value;

      if (!value || !description) {
        alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!');
        return;
      }

      const stat = {
        value: value,
        description: description
      };

      if (index !== '' && currentEditingStatIndex !== null) {
        stats[currentEditingStatIndex] = stat;
      } else {
        stats.push(stat);
      }

      // Update content
      if (!content.about) content.about = {};
      content.about.features = stats;
      
      // Also update vision and mission if they exist in form
      const visionTitle = document.getElementById('about-vision-title');
      const visionDesc = document.getElementById('about-vision-description');
      const missionTitle = document.getElementById('about-mission-title');
      const missionDesc = document.getElementById('about-mission-description');
      
      if (visionTitle && visionDesc) {
        content.about.vision = {
          title: visionTitle.value || 'Vision',
          description: visionDesc.value || ''
        };
      }
      
      if (missionTitle && missionDesc) {
        content.about.mission = {
          title: missionTitle.value || 'Mission',
          description: missionDesc.value || ''
        };
      }

      document.getElementById('stat-modal').style.display = 'none';
      renderStats('stats-list-about');
    });

    document.getElementById('stat-cancel-btn').addEventListener('click', () => {
      document.getElementById('stat-modal').style.display = 'none';
    });

    // Setup handlers for vision and mission when about page is loaded
    function setupVisionMissionHandlers() {
      const visionTitle = document.getElementById('about-vision-title');
      const missionTitle = document.getElementById('about-mission-title');
      
      if (visionTitle && !visionTitle.dataset.handlerSetup) {
        visionTitle.dataset.handlerSetup = 'true';
        // Vision and mission are auto-saved via saveContentFromForms
      }
    }

    // User Management Functions
    function getCredentials() {
      const stored = localStorage.getItem('cms_credentials');
      if (stored) {
        try {
          return JSON.parse(stored);
        } catch (e) {
          console.error('Error parsing stored credentials:', e);
        }
      }
      // Default credentials
      return {
        username: 'admin',
        password: 'admin123'
      };
    }

    function saveCredentials(credentials) {
      try {
        localStorage.setItem('cms_credentials', JSON.stringify(credentials));
        return true;
      } catch (e) {
        console.error('Error saving credentials:', e);
        return false;
      }
    }

    // Update Username Form Handler
    document.getElementById('update-username-form').addEventListener('submit', (e) => {
      e.preventDefault();
      
      const newUsername = document.getElementById('new-username').value.trim();
      const password = document.getElementById('username-confirm-password').value;
      const errorDiv = document.getElementById('username-error');
      const successDiv = document.getElementById('username-success');
      
      // Hide previous messages
      errorDiv.style.display = 'none';
      successDiv.style.display = 'none';
      
      // Validate
      if (!newUsername || newUsername.length < 3) {
        errorDiv.textContent = 'Username ph·∫£i c√≥ √≠t nh·∫•t 3 k√Ω t·ª±!';
        errorDiv.style.display = 'block';
        return;
      }
      
      const credentials = getCredentials();
      
      // Check password
      if (password !== credentials.password) {
        errorDiv.textContent = 'Password kh√¥ng ƒë√∫ng!';
        errorDiv.style.display = 'block';
        document.getElementById('username-confirm-password').value = '';
        return;
      }
      
      // Update username
      const newCredentials = {
        username: newUsername,
        password: credentials.password
      };
      
      if (saveCredentials(newCredentials)) {
        // Update current username in localStorage
        localStorage.setItem('cms_username', newUsername);
        
        // Update display
        const usernameEl = document.getElementById('current-username');
        if (usernameEl) {
          usernameEl.textContent = `Xin ch√†o, ${newUsername}`;
        }
        
        successDiv.textContent = 'Username ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t th√†nh c√¥ng!';
        successDiv.style.display = 'block';
        
        // Clear form
        document.getElementById('new-username').value = '';
        document.getElementById('username-confirm-password').value = '';
        
        // Hide success message after 3 seconds
        setTimeout(() => {
          successDiv.style.display = 'none';
        }, 3000);
      } else {
        errorDiv.textContent = 'C√≥ l·ªói x·∫£y ra khi l∆∞u username!';
        errorDiv.style.display = 'block';
      }
    });

    // Update Password Form Handler
    document.getElementById('update-password-form').addEventListener('submit', (e) => {
      e.preventDefault();
      
      const oldPassword = document.getElementById('old-password').value;
      const newPassword = document.getElementById('new-password').value;
      const confirmPassword = document.getElementById('confirm-password').value;
      const errorDiv = document.getElementById('password-error');
      const successDiv = document.getElementById('password-success');
      
      // Hide previous messages
      errorDiv.style.display = 'none';
      successDiv.style.display = 'none';
      
      // Validate
      if (newPassword.length < 6) {
        errorDiv.textContent = 'Password m·ªõi ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±!';
        errorDiv.style.display = 'block';
        return;
      }
      
      if (newPassword !== confirmPassword) {
        errorDiv.textContent = 'Password x√°c nh·∫≠n kh√¥ng kh·ªõp!';
        errorDiv.style.display = 'block';
        document.getElementById('confirm-password').value = '';
        return;
      }
      
      const credentials = getCredentials();
      
      // Check old password
      if (oldPassword !== credentials.password) {
        errorDiv.textContent = 'Password hi·ªán t·∫°i kh√¥ng ƒë√∫ng!';
        errorDiv.style.display = 'block';
        document.getElementById('old-password').value = '';
        return;
      }
      
      // Update password
      const newCredentials = {
        username: credentials.username,
        password: newPassword
      };
      
      if (saveCredentials(newCredentials)) {
        successDiv.textContent = 'Password ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t th√†nh c√¥ng!';
        successDiv.style.display = 'block';
        
        // Clear form
        document.getElementById('old-password').value = '';
        document.getElementById('new-password').value = '';
        document.getElementById('confirm-password').value = '';
        
        // Hide success message after 3 seconds
        setTimeout(() => {
          successDiv.style.display = 'none';
        }, 3000);
      } else {
        errorDiv.textContent = 'C√≥ l·ªói x·∫£y ra khi l∆∞u password!';
        errorDiv.style.display = 'block';
      }
    });

    // Initialize
    loadCategoryOptions();
    renderCategories();
    renderPosts();
    renderSlides();
  </script>
</Layout>

